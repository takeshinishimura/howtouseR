<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>まずは使ってみる</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="tidyverse_files/libs/clipboard/clipboard.min.js"></script>
<script src="tidyverse_files/libs/quarto-html/quarto.js"></script>
<script src="tidyverse_files/libs/quarto-html/popper.min.js"></script>
<script src="tidyverse_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="tidyverse_files/libs/quarto-html/anchor.min.js"></script>
<link href="tidyverse_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="tidyverse_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="tidyverse_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="tidyverse_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="tidyverse_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">目次</h2>
   
  <ul>
  <li><a href="#tibble" id="toc-tibble" class="nav-link active" data-scroll-target="#tibble"><span class="header-section-number">1</span> tibble</a>
  <ul>
  <li><a href="#tidyr" id="toc-tidyr" class="nav-link" data-scroll-target="#tidyr"><span class="header-section-number">1.1</span> tidyr</a>
  <ul class="collapse">
  <li><a href="#pivot_longer" id="toc-pivot_longer" class="nav-link" data-scroll-target="#pivot_longer"><span class="header-section-number">1.1.1</span> pivot_longer()</a></li>
  <li><a href="#pivot_wider" id="toc-pivot_wider" class="nav-link" data-scroll-target="#pivot_wider"><span class="header-section-number">1.1.2</span> pivot_wider()</a></li>
  <li><a href="#separate" id="toc-separate" class="nav-link" data-scroll-target="#separate"><span class="header-section-number">1.1.3</span> separate()</a></li>
  <li><a href="#unnest" id="toc-unnest" class="nav-link" data-scroll-target="#unnest"><span class="header-section-number">1.1.4</span> unnest()</a></li>
  </ul></li>
  <li><a href="#dplyr" id="toc-dplyr" class="nav-link" data-scroll-target="#dplyr"><span class="header-section-number">1.2</span> dplyr</a>
  <ul class="collapse">
  <li><a href="#select" id="toc-select" class="nav-link" data-scroll-target="#select"><span class="header-section-number">1.2.1</span> select()</a></li>
  <li><a href="#mutate" id="toc-mutate" class="nav-link" data-scroll-target="#mutate"><span class="header-section-number">1.2.2</span> mutate()</a></li>
  <li><a href="#filter" id="toc-filter" class="nav-link" data-scroll-target="#filter"><span class="header-section-number">1.2.3</span> filter()</a></li>
  <li><a href="#arrange" id="toc-arrange" class="nav-link" data-scroll-target="#arrange"><span class="header-section-number">1.2.4</span> arrange()</a></li>
  <li><a href="#count" id="toc-count" class="nav-link" data-scroll-target="#count"><span class="header-section-number">1.2.5</span> count()</a></li>
  <li><a href="#arrange-1" id="toc-arrange-1" class="nav-link" data-scroll-target="#arrange-1"><span class="header-section-number">1.2.6</span> arrange()</a></li>
  <li><a href="#summarise" id="toc-summarise" class="nav-link" data-scroll-target="#summarise"><span class="header-section-number">1.2.7</span> summarise()</a></li>
  <li><a href="#group_by" id="toc-group_by" class="nav-link" data-scroll-target="#group_by"><span class="header-section-number">1.2.8</span> group_by</a></li>
  </ul></li>
  <li><a href="#readr" id="toc-readr" class="nav-link" data-scroll-target="#readr"><span class="header-section-number">1.3</span> readr</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">まずは使ってみる</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">公開</div>
    <div class="quarto-title-meta-contents">
      <p class="date">2023年8月3日</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="tibble" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="tibble"><span class="header-section-number">1</span> tibble</h2>
<p><a href="https://tibble.tidyverse.org/" target="_blank">tibble</a></p>
<section id="tidyr" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="tidyr"><span class="header-section-number">1.1</span> tidyr</h3>
<p><a href="https://tidyr.tidyverse.org/" target="_blank">tidyr</a></p>
<p>ワイドはMicrosoft Excelでよく見る，複数の列がある表のようなデータ形式のことです。 一方，ロングというデータ形式もあり，列数は限られています。 ワイドは横に長く，ロングは縦に長いデータフレームです。</p>
<section id="pivot_longer" class="level4" data-number="1.1.1">
<h4 data-number="1.1.1" class="anchored" data-anchor-id="pivot_longer"><span class="header-section-number">1.1.1</span> pivot_longer()</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(iris)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 150   5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>iris_long <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(iris, <span class="at">cols =</span> Sepal.Length<span class="sc">:</span>Petal.Width)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>iris_long</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 3
   Species name         value
   &lt;fct&gt;   &lt;chr&gt;        &lt;dbl&gt;
 1 setosa  Sepal.Length   5.1
 2 setosa  Sepal.Width    3.5
 3 setosa  Petal.Length   1.4
 4 setosa  Petal.Width    0.2
 5 setosa  Sepal.Length   4.9
 6 setosa  Sepal.Width    3  
 7 setosa  Petal.Length   1.4
 8 setosa  Petal.Width    0.2
 9 setosa  Sepal.Length   4.7
10 setosa  Sepal.Width    3.2
# ℹ 590 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(iris_long)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 600   3</code></pre>
</div>
</div>
</section>
<section id="pivot_wider" class="level4" data-number="1.1.2">
<h4 data-number="1.1.2" class="anchored" data-anchor-id="pivot_wider"><span class="header-section-number">1.1.2</span> pivot_wider()</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>iris_wide <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(iris_long, <span class="at">names_from =</span> name)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Values from `value` are not uniquely identified; output will contain list-cols.
• Use `values_fn = list` to suppress this warning.
• Use `values_fn = {summary_fun}` to summarise duplicates.
• Use the following dplyr code to identify duplicates.
  {data} %&gt;%
  dplyr::group_by(Species, name) %&gt;%
  dplyr::summarise(n = dplyr::n(), .groups = "drop") %&gt;%
  dplyr::filter(n &gt; 1L)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>iris_wide</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  Species    Sepal.Length Sepal.Width Petal.Length Petal.Width
  &lt;fct&gt;      &lt;list&gt;       &lt;list&gt;      &lt;list&gt;       &lt;list&gt;     
1 setosa     &lt;dbl [50]&gt;   &lt;dbl [50]&gt;  &lt;dbl [50]&gt;   &lt;dbl [50]&gt; 
2 versicolor &lt;dbl [50]&gt;   &lt;dbl [50]&gt;  &lt;dbl [50]&gt;   &lt;dbl [50]&gt; 
3 virginica  &lt;dbl [50]&gt;   &lt;dbl [50]&gt;  &lt;dbl [50]&gt;   &lt;dbl [50]&gt; </code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(iris_wide)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 5</code></pre>
</div>
</div>
<p><code>tidyr::spread()</code> と <code>tidyr::gather()</code> は superseded になっている（古い関数）ので，覚える必要はない。</p>
</section>
<section id="separate" class="level4" data-number="1.1.3">
<h4 data-number="1.1.3" class="anchored" data-anchor-id="separate"><span class="header-section-number">1.1.3</span> separate()</h4>
<p><code>tidyr::separate()</code> は列を複数列に分割します。 ただし，superseded になっているため，次のようなコマンドで代替します。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">tmp =</span> <span class="fu">formatC</span>(Sepal.Length, <span class="at">format =</span> <span class="st">"f"</span>, <span class="at">digits =</span> <span class="dv">1</span>)) <span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(tmp, <span class="at">delim =</span> <span class="st">"."</span>, <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 7
   Sepal.Length Sepal.Width Petal.Length Petal.Width Species A     B    
          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;
 1          5.1         3.5          1.4         0.2 setosa  5     1    
 2          4.9         3            1.4         0.2 setosa  4     9    
 3          4.7         3.2          1.3         0.2 setosa  4     7    
 4          4.6         3.1          1.5         0.2 setosa  4     6    
 5          5           3.6          1.4         0.2 setosa  5     0    
 6          5.4         3.9          1.7         0.4 setosa  5     4    
 7          4.6         3.4          1.4         0.3 setosa  4     6    
 8          5           3.4          1.5         0.2 setosa  5     0    
 9          4.4         2.9          1.4         0.2 setosa  4     4    
10          4.9         3.1          1.5         0.1 setosa  4     9    
# ℹ 140 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tidyr::separate_longer_delim(tmp, delim = ".")</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="unnest" class="level4" data-number="1.1.4">
<h4 data-number="1.1.4" class="anchored" data-anchor-id="unnest"><span class="header-section-number">1.1.4</span> unnest()</h4>
<p><code>tidyr::unnest()</code> はリストの中を <code>unlist()</code> して，行と列の要素とします。 他の列は，重複分だけ複製されます。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">unnest</span>()</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="dplyr" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="dplyr"><span class="header-section-number">1.2</span> dplyr</h3>
<p><a href="https://dplyr.tidyverse.org/" target="_blank">dplyr</a></p>
<section id="select" class="level4" data-number="1.2.1">
<h4 data-number="1.2.1" class="anchored" data-anchor-id="select"><span class="header-section-number">1.2.1</span> select()</h4>
<p><code>select()</code> で列を選択する。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris[<span class="st">"Species"</span>])</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Species
1  setosa
2  setosa
3  setosa
4  setosa
5  setosa
6  setosa</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(Species))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Species
1  setosa
2  setosa
3  setosa
4  setosa
5  setosa
6  setosa</code></pre>
</div>
</div>
</section>
<section id="mutate" class="level4" data-number="1.2.2">
<h4 data-number="1.2.2" class="anchored" data-anchor-id="mutate"><span class="header-section-number">1.2.2</span> mutate()</h4>
<p><code>mutate()</code> で新しい列を作成する。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>iris2 <span class="ot">&lt;-</span> iris</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>iris2<span class="sc">$</span>new_species <span class="ot">&lt;-</span> iris2<span class="sc">$</span>Species</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris2)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species new_species
1          5.1         3.5          1.4         0.2  setosa      setosa
2          4.9         3.0          1.4         0.2  setosa      setosa
3          4.7         3.2          1.3         0.2  setosa      setosa
4          4.6         3.1          1.5         0.2  setosa      setosa
5          5.0         3.6          1.4         0.2  setosa      setosa
6          5.4         3.9          1.7         0.4  setosa      setosa</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>iris3 <span class="ot">&lt;-</span> iris</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris3 <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">new_species =</span> Species))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species new_species
1          5.1         3.5          1.4         0.2  setosa      setosa
2          4.9         3.0          1.4         0.2  setosa      setosa
3          4.7         3.2          1.3         0.2  setosa      setosa
4          4.6         3.1          1.5         0.2  setosa      setosa
5          5.0         3.6          1.4         0.2  setosa      setosa
6          5.4         3.9          1.7         0.4  setosa      setosa</code></pre>
</div>
</div>
<p><code>mutate()</code> で列を修正する。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris<span class="sc">$</span>Sepal.Length <span class="ot">&lt;-</span> iris<span class="sc">$</span>Sepal.Length <span class="sc">*</span> <span class="dv">100</span>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 510 490 470 460 500 540</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Sepal.Length =</span> iris<span class="sc">$</span>Sepal.Length <span class="sc">*</span> <span class="dv">100</span>))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1        51000         3.5          1.4         0.2  setosa
2        49000         3.0          1.4         0.2  setosa
3        47000         3.2          1.3         0.2  setosa
4        46000         3.1          1.5         0.2  setosa
5        50000         3.6          1.4         0.2  setosa
6        54000         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
<p><code>mutate()</code> で列を修正する。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   150 obs. of  5 variables:
 $ Sepal.Length: num  510 490 470 460 500 540 460 500 440 490 ...
 $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
 $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
 $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>iris2 <span class="ot">&lt;-</span> iris</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">names</span>(iris2)[<span class="fu">names</span>(iris2) <span class="sc">!=</span> <span class="st">"Species"</span>]) {</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  iris2[[i]] <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(iris2[[i]])</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris2)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   150 obs. of  5 variables:
 $ Sepal.Length: Factor w/ 35 levels "430","440","450",..: 9 7 5 4 8 12 4 8 2 7 ...
 $ Sepal.Width : Factor w/ 23 levels "2","2.2","2.3",..: 15 10 12 11 16 19 14 14 9 11 ...
 $ Petal.Length: Factor w/ 43 levels "1","1.1","1.2",..: 5 5 4 6 5 8 5 6 5 6 ...
 $ Petal.Width : Factor w/ 22 levels "0.1","0.2","0.3",..: 2 2 2 2 2 4 3 2 2 1 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>iris3 <span class="ot">&lt;-</span> iris <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="sc">!</span>Species, as.factor))</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris3)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   150 obs. of  5 variables:
 $ Sepal.Length: Factor w/ 35 levels "430","440","450",..: 9 7 5 4 8 12 4 8 2 7 ...
 $ Sepal.Width : Factor w/ 23 levels "2","2.2","2.3",..: 15 10 12 11 16 19 14 14 9 11 ...
 $ Petal.Length: Factor w/ 43 levels "1","1.1","1.2",..: 5 5 4 6 5 8 5 6 5 6 ...
 $ Petal.Width : Factor w/ 22 levels "0.1","0.2","0.3",..: 2 2 2 2 2 4 3 2 2 1 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
</div>
</section>
<section id="filter" class="level4" data-number="1.2.3">
<h4 data-number="1.2.3" class="anchored" data-anchor-id="filter"><span class="header-section-number">1.2.3</span> filter()</h4>
<p><code>filter()</code> で列を抽出する。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>iris[iris<span class="sc">$</span>Sepal.Length <span class="sc">&gt;</span> <span class="fu">mean</span>(iris<span class="sc">$</span>Sepal.Length), ]</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
51           700         3.2          4.7         1.4 versicolor
52           640         3.2          4.5         1.5 versicolor
53           690         3.1          4.9         1.5 versicolor
55           650         2.8          4.6         1.5 versicolor
57           630         3.3          4.7         1.6 versicolor
59           660         2.9          4.6         1.3 versicolor
62           590         3.0          4.2         1.5 versicolor
63           600         2.2          4.0         1.0 versicolor
64           610         2.9          4.7         1.4 versicolor
66           670         3.1          4.4         1.4 versicolor
69           620         2.2          4.5         1.5 versicolor
71           590         3.2          4.8         1.8 versicolor
72           610         2.8          4.0         1.3 versicolor
73           630         2.5          4.9         1.5 versicolor
74           610         2.8          4.7         1.2 versicolor
75           640         2.9          4.3         1.3 versicolor
76           660         3.0          4.4         1.4 versicolor
77           680         2.8          4.8         1.4 versicolor
78           670         3.0          5.0         1.7 versicolor
79           600         2.9          4.5         1.5 versicolor
84           600         2.7          5.1         1.6 versicolor
86           600         3.4          4.5         1.6 versicolor
87           670         3.1          4.7         1.5 versicolor
88           630         2.3          4.4         1.3 versicolor
92           610         3.0          4.6         1.4 versicolor
98           620         2.9          4.3         1.3 versicolor
101          630         3.3          6.0         2.5  virginica
103          710         3.0          5.9         2.1  virginica
104          630         2.9          5.6         1.8  virginica
105          650         3.0          5.8         2.2  virginica
106          760         3.0          6.6         2.1  virginica
108          730         2.9          6.3         1.8  virginica
109          670         2.5          5.8         1.8  virginica
110          720         3.6          6.1         2.5  virginica
111          650         3.2          5.1         2.0  virginica
112          640         2.7          5.3         1.9  virginica
113          680         3.0          5.5         2.1  virginica
116          640         3.2          5.3         2.3  virginica
117          650         3.0          5.5         1.8  virginica
118          770         3.8          6.7         2.2  virginica
119          770         2.6          6.9         2.3  virginica
120          600         2.2          5.0         1.5  virginica
121          690         3.2          5.7         2.3  virginica
123          770         2.8          6.7         2.0  virginica
124          630         2.7          4.9         1.8  virginica
125          670         3.3          5.7         2.1  virginica
126          720         3.2          6.0         1.8  virginica
127          620         2.8          4.8         1.8  virginica
128          610         3.0          4.9         1.8  virginica
129          640         2.8          5.6         2.1  virginica
130          720         3.0          5.8         1.6  virginica
131          740         2.8          6.1         1.9  virginica
132          790         3.8          6.4         2.0  virginica
133          640         2.8          5.6         2.2  virginica
134          630         2.8          5.1         1.5  virginica
135          610         2.6          5.6         1.4  virginica
136          770         3.0          6.1         2.3  virginica
137          630         3.4          5.6         2.4  virginica
138          640         3.1          5.5         1.8  virginica
139          600         3.0          4.8         1.8  virginica
140          690         3.1          5.4         2.1  virginica
141          670         3.1          5.6         2.4  virginica
142          690         3.1          5.1         2.3  virginica
144          680         3.2          5.9         2.3  virginica
145          670         3.3          5.7         2.5  virginica
146          670         3.0          5.2         2.3  virginica
147          630         2.5          5.0         1.9  virginica
148          650         3.0          5.2         2.0  virginica
149          620         3.4          5.4         2.3  virginica
150          590         3.0          5.1         1.8  virginica</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(Sepal.Length <span class="sc">&gt;</span> <span class="fu">mean</span>(iris<span class="sc">$</span>Sepal.Length))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
1           700         3.2          4.7         1.4 versicolor
2           640         3.2          4.5         1.5 versicolor
3           690         3.1          4.9         1.5 versicolor
4           650         2.8          4.6         1.5 versicolor
5           630         3.3          4.7         1.6 versicolor
6           660         2.9          4.6         1.3 versicolor
7           590         3.0          4.2         1.5 versicolor
8           600         2.2          4.0         1.0 versicolor
9           610         2.9          4.7         1.4 versicolor
10          670         3.1          4.4         1.4 versicolor
11          620         2.2          4.5         1.5 versicolor
12          590         3.2          4.8         1.8 versicolor
13          610         2.8          4.0         1.3 versicolor
14          630         2.5          4.9         1.5 versicolor
15          610         2.8          4.7         1.2 versicolor
16          640         2.9          4.3         1.3 versicolor
17          660         3.0          4.4         1.4 versicolor
18          680         2.8          4.8         1.4 versicolor
19          670         3.0          5.0         1.7 versicolor
20          600         2.9          4.5         1.5 versicolor
21          600         2.7          5.1         1.6 versicolor
22          600         3.4          4.5         1.6 versicolor
23          670         3.1          4.7         1.5 versicolor
24          630         2.3          4.4         1.3 versicolor
25          610         3.0          4.6         1.4 versicolor
26          620         2.9          4.3         1.3 versicolor
27          630         3.3          6.0         2.5  virginica
28          710         3.0          5.9         2.1  virginica
29          630         2.9          5.6         1.8  virginica
30          650         3.0          5.8         2.2  virginica
31          760         3.0          6.6         2.1  virginica
32          730         2.9          6.3         1.8  virginica
33          670         2.5          5.8         1.8  virginica
34          720         3.6          6.1         2.5  virginica
35          650         3.2          5.1         2.0  virginica
36          640         2.7          5.3         1.9  virginica
37          680         3.0          5.5         2.1  virginica
38          640         3.2          5.3         2.3  virginica
39          650         3.0          5.5         1.8  virginica
40          770         3.8          6.7         2.2  virginica
41          770         2.6          6.9         2.3  virginica
42          600         2.2          5.0         1.5  virginica
43          690         3.2          5.7         2.3  virginica
44          770         2.8          6.7         2.0  virginica
45          630         2.7          4.9         1.8  virginica
46          670         3.3          5.7         2.1  virginica
47          720         3.2          6.0         1.8  virginica
48          620         2.8          4.8         1.8  virginica
49          610         3.0          4.9         1.8  virginica
50          640         2.8          5.6         2.1  virginica
51          720         3.0          5.8         1.6  virginica
52          740         2.8          6.1         1.9  virginica
53          790         3.8          6.4         2.0  virginica
54          640         2.8          5.6         2.2  virginica
55          630         2.8          5.1         1.5  virginica
56          610         2.6          5.6         1.4  virginica
57          770         3.0          6.1         2.3  virginica
58          630         3.4          5.6         2.4  virginica
59          640         3.1          5.5         1.8  virginica
60          600         3.0          4.8         1.8  virginica
61          690         3.1          5.4         2.1  virginica
62          670         3.1          5.6         2.4  virginica
63          690         3.1          5.1         2.3  virginica
64          680         3.2          5.9         2.3  virginica
65          670         3.3          5.7         2.5  virginica
66          670         3.0          5.2         2.3  virginica
67          630         2.5          5.0         1.9  virginica
68          650         3.0          5.2         2.0  virginica
69          620         3.4          5.4         2.3  virginica
70          590         3.0          5.1         1.8  virginica</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>iris[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">"setosa"</span>, ]</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1           510         3.5          1.4         0.2  setosa
2           490         3.0          1.4         0.2  setosa
3           470         3.2          1.3         0.2  setosa
4           460         3.1          1.5         0.2  setosa
5           500         3.6          1.4         0.2  setosa
6           540         3.9          1.7         0.4  setosa
7           460         3.4          1.4         0.3  setosa
8           500         3.4          1.5         0.2  setosa
9           440         2.9          1.4         0.2  setosa
10          490         3.1          1.5         0.1  setosa
11          540         3.7          1.5         0.2  setosa
12          480         3.4          1.6         0.2  setosa
13          480         3.0          1.4         0.1  setosa
14          430         3.0          1.1         0.1  setosa
15          580         4.0          1.2         0.2  setosa
16          570         4.4          1.5         0.4  setosa
17          540         3.9          1.3         0.4  setosa
18          510         3.5          1.4         0.3  setosa
19          570         3.8          1.7         0.3  setosa
20          510         3.8          1.5         0.3  setosa
21          540         3.4          1.7         0.2  setosa
22          510         3.7          1.5         0.4  setosa
23          460         3.6          1.0         0.2  setosa
24          510         3.3          1.7         0.5  setosa
25          480         3.4          1.9         0.2  setosa
26          500         3.0          1.6         0.2  setosa
27          500         3.4          1.6         0.4  setosa
28          520         3.5          1.5         0.2  setosa
29          520         3.4          1.4         0.2  setosa
30          470         3.2          1.6         0.2  setosa
31          480         3.1          1.6         0.2  setosa
32          540         3.4          1.5         0.4  setosa
33          520         4.1          1.5         0.1  setosa
34          550         4.2          1.4         0.2  setosa
35          490         3.1          1.5         0.2  setosa
36          500         3.2          1.2         0.2  setosa
37          550         3.5          1.3         0.2  setosa
38          490         3.6          1.4         0.1  setosa
39          440         3.0          1.3         0.2  setosa
40          510         3.4          1.5         0.2  setosa
41          500         3.5          1.3         0.3  setosa
42          450         2.3          1.3         0.3  setosa
43          440         3.2          1.3         0.2  setosa
44          500         3.5          1.6         0.6  setosa
45          510         3.8          1.9         0.4  setosa
46          480         3.0          1.4         0.3  setosa
47          510         3.8          1.6         0.2  setosa
48          460         3.2          1.4         0.2  setosa
49          530         3.7          1.5         0.2  setosa
50          500         3.3          1.4         0.2  setosa</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">"setosa"</span>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1           510         3.5          1.4         0.2  setosa
2           490         3.0          1.4         0.2  setosa
3           470         3.2          1.3         0.2  setosa
4           460         3.1          1.5         0.2  setosa
5           500         3.6          1.4         0.2  setosa
6           540         3.9          1.7         0.4  setosa
7           460         3.4          1.4         0.3  setosa
8           500         3.4          1.5         0.2  setosa
9           440         2.9          1.4         0.2  setosa
10          490         3.1          1.5         0.1  setosa
11          540         3.7          1.5         0.2  setosa
12          480         3.4          1.6         0.2  setosa
13          480         3.0          1.4         0.1  setosa
14          430         3.0          1.1         0.1  setosa
15          580         4.0          1.2         0.2  setosa
16          570         4.4          1.5         0.4  setosa
17          540         3.9          1.3         0.4  setosa
18          510         3.5          1.4         0.3  setosa
19          570         3.8          1.7         0.3  setosa
20          510         3.8          1.5         0.3  setosa
21          540         3.4          1.7         0.2  setosa
22          510         3.7          1.5         0.4  setosa
23          460         3.6          1.0         0.2  setosa
24          510         3.3          1.7         0.5  setosa
25          480         3.4          1.9         0.2  setosa
26          500         3.0          1.6         0.2  setosa
27          500         3.4          1.6         0.4  setosa
28          520         3.5          1.5         0.2  setosa
29          520         3.4          1.4         0.2  setosa
30          470         3.2          1.6         0.2  setosa
31          480         3.1          1.6         0.2  setosa
32          540         3.4          1.5         0.4  setosa
33          520         4.1          1.5         0.1  setosa
34          550         4.2          1.4         0.2  setosa
35          490         3.1          1.5         0.2  setosa
36          500         3.2          1.2         0.2  setosa
37          550         3.5          1.3         0.2  setosa
38          490         3.6          1.4         0.1  setosa
39          440         3.0          1.3         0.2  setosa
40          510         3.4          1.5         0.2  setosa
41          500         3.5          1.3         0.3  setosa
42          450         2.3          1.3         0.3  setosa
43          440         3.2          1.3         0.2  setosa
44          500         3.5          1.6         0.6  setosa
45          510         3.8          1.9         0.4  setosa
46          480         3.0          1.4         0.3  setosa
47          510         3.8          1.6         0.2  setosa
48          460         3.2          1.4         0.2  setosa
49          530         3.7          1.5         0.2  setosa
50          500         3.3          1.4         0.2  setosa</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>iris[<span class="fu">grep</span>(<span class="st">"^v"</span>, iris<span class="sc">$</span>Species), ]</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
51           700         3.2          4.7         1.4 versicolor
52           640         3.2          4.5         1.5 versicolor
53           690         3.1          4.9         1.5 versicolor
54           550         2.3          4.0         1.3 versicolor
55           650         2.8          4.6         1.5 versicolor
56           570         2.8          4.5         1.3 versicolor
57           630         3.3          4.7         1.6 versicolor
58           490         2.4          3.3         1.0 versicolor
59           660         2.9          4.6         1.3 versicolor
60           520         2.7          3.9         1.4 versicolor
61           500         2.0          3.5         1.0 versicolor
62           590         3.0          4.2         1.5 versicolor
63           600         2.2          4.0         1.0 versicolor
64           610         2.9          4.7         1.4 versicolor
65           560         2.9          3.6         1.3 versicolor
66           670         3.1          4.4         1.4 versicolor
67           560         3.0          4.5         1.5 versicolor
68           580         2.7          4.1         1.0 versicolor
69           620         2.2          4.5         1.5 versicolor
70           560         2.5          3.9         1.1 versicolor
71           590         3.2          4.8         1.8 versicolor
72           610         2.8          4.0         1.3 versicolor
73           630         2.5          4.9         1.5 versicolor
74           610         2.8          4.7         1.2 versicolor
75           640         2.9          4.3         1.3 versicolor
76           660         3.0          4.4         1.4 versicolor
77           680         2.8          4.8         1.4 versicolor
78           670         3.0          5.0         1.7 versicolor
79           600         2.9          4.5         1.5 versicolor
80           570         2.6          3.5         1.0 versicolor
81           550         2.4          3.8         1.1 versicolor
82           550         2.4          3.7         1.0 versicolor
83           580         2.7          3.9         1.2 versicolor
84           600         2.7          5.1         1.6 versicolor
85           540         3.0          4.5         1.5 versicolor
86           600         3.4          4.5         1.6 versicolor
87           670         3.1          4.7         1.5 versicolor
88           630         2.3          4.4         1.3 versicolor
89           560         3.0          4.1         1.3 versicolor
90           550         2.5          4.0         1.3 versicolor
91           550         2.6          4.4         1.2 versicolor
92           610         3.0          4.6         1.4 versicolor
93           580         2.6          4.0         1.2 versicolor
94           500         2.3          3.3         1.0 versicolor
95           560         2.7          4.2         1.3 versicolor
96           570         3.0          4.2         1.2 versicolor
97           570         2.9          4.2         1.3 versicolor
98           620         2.9          4.3         1.3 versicolor
99           510         2.5          3.0         1.1 versicolor
100          570         2.8          4.1         1.3 versicolor
101          630         3.3          6.0         2.5  virginica
102          580         2.7          5.1         1.9  virginica
103          710         3.0          5.9         2.1  virginica
104          630         2.9          5.6         1.8  virginica
105          650         3.0          5.8         2.2  virginica
106          760         3.0          6.6         2.1  virginica
107          490         2.5          4.5         1.7  virginica
108          730         2.9          6.3         1.8  virginica
109          670         2.5          5.8         1.8  virginica
110          720         3.6          6.1         2.5  virginica
111          650         3.2          5.1         2.0  virginica
112          640         2.7          5.3         1.9  virginica
113          680         3.0          5.5         2.1  virginica
114          570         2.5          5.0         2.0  virginica
115          580         2.8          5.1         2.4  virginica
116          640         3.2          5.3         2.3  virginica
117          650         3.0          5.5         1.8  virginica
118          770         3.8          6.7         2.2  virginica
119          770         2.6          6.9         2.3  virginica
120          600         2.2          5.0         1.5  virginica
121          690         3.2          5.7         2.3  virginica
122          560         2.8          4.9         2.0  virginica
123          770         2.8          6.7         2.0  virginica
124          630         2.7          4.9         1.8  virginica
125          670         3.3          5.7         2.1  virginica
126          720         3.2          6.0         1.8  virginica
127          620         2.8          4.8         1.8  virginica
128          610         3.0          4.9         1.8  virginica
129          640         2.8          5.6         2.1  virginica
130          720         3.0          5.8         1.6  virginica
131          740         2.8          6.1         1.9  virginica
132          790         3.8          6.4         2.0  virginica
133          640         2.8          5.6         2.2  virginica
134          630         2.8          5.1         1.5  virginica
135          610         2.6          5.6         1.4  virginica
136          770         3.0          6.1         2.3  virginica
137          630         3.4          5.6         2.4  virginica
138          640         3.1          5.5         1.8  virginica
139          600         3.0          4.8         1.8  virginica
140          690         3.1          5.4         2.1  virginica
141          670         3.1          5.6         2.4  virginica
142          690         3.1          5.1         2.3  virginica
143          580         2.7          5.1         1.9  virginica
144          680         3.2          5.9         2.3  virginica
145          670         3.3          5.7         2.5  virginica
146          670         3.0          5.2         2.3  virginica
147          630         2.5          5.0         1.9  virginica
148          650         3.0          5.2         2.0  virginica
149          620         3.4          5.4         2.3  virginica
150          590         3.0          5.1         1.8  virginica</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(Species, <span class="st">"^v"</span>))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
1            700         3.2          4.7         1.4 versicolor
2            640         3.2          4.5         1.5 versicolor
3            690         3.1          4.9         1.5 versicolor
4            550         2.3          4.0         1.3 versicolor
5            650         2.8          4.6         1.5 versicolor
6            570         2.8          4.5         1.3 versicolor
7            630         3.3          4.7         1.6 versicolor
8            490         2.4          3.3         1.0 versicolor
9            660         2.9          4.6         1.3 versicolor
10           520         2.7          3.9         1.4 versicolor
11           500         2.0          3.5         1.0 versicolor
12           590         3.0          4.2         1.5 versicolor
13           600         2.2          4.0         1.0 versicolor
14           610         2.9          4.7         1.4 versicolor
15           560         2.9          3.6         1.3 versicolor
16           670         3.1          4.4         1.4 versicolor
17           560         3.0          4.5         1.5 versicolor
18           580         2.7          4.1         1.0 versicolor
19           620         2.2          4.5         1.5 versicolor
20           560         2.5          3.9         1.1 versicolor
21           590         3.2          4.8         1.8 versicolor
22           610         2.8          4.0         1.3 versicolor
23           630         2.5          4.9         1.5 versicolor
24           610         2.8          4.7         1.2 versicolor
25           640         2.9          4.3         1.3 versicolor
26           660         3.0          4.4         1.4 versicolor
27           680         2.8          4.8         1.4 versicolor
28           670         3.0          5.0         1.7 versicolor
29           600         2.9          4.5         1.5 versicolor
30           570         2.6          3.5         1.0 versicolor
31           550         2.4          3.8         1.1 versicolor
32           550         2.4          3.7         1.0 versicolor
33           580         2.7          3.9         1.2 versicolor
34           600         2.7          5.1         1.6 versicolor
35           540         3.0          4.5         1.5 versicolor
36           600         3.4          4.5         1.6 versicolor
37           670         3.1          4.7         1.5 versicolor
38           630         2.3          4.4         1.3 versicolor
39           560         3.0          4.1         1.3 versicolor
40           550         2.5          4.0         1.3 versicolor
41           550         2.6          4.4         1.2 versicolor
42           610         3.0          4.6         1.4 versicolor
43           580         2.6          4.0         1.2 versicolor
44           500         2.3          3.3         1.0 versicolor
45           560         2.7          4.2         1.3 versicolor
46           570         3.0          4.2         1.2 versicolor
47           570         2.9          4.2         1.3 versicolor
48           620         2.9          4.3         1.3 versicolor
49           510         2.5          3.0         1.1 versicolor
50           570         2.8          4.1         1.3 versicolor
51           630         3.3          6.0         2.5  virginica
52           580         2.7          5.1         1.9  virginica
53           710         3.0          5.9         2.1  virginica
54           630         2.9          5.6         1.8  virginica
55           650         3.0          5.8         2.2  virginica
56           760         3.0          6.6         2.1  virginica
57           490         2.5          4.5         1.7  virginica
58           730         2.9          6.3         1.8  virginica
59           670         2.5          5.8         1.8  virginica
60           720         3.6          6.1         2.5  virginica
61           650         3.2          5.1         2.0  virginica
62           640         2.7          5.3         1.9  virginica
63           680         3.0          5.5         2.1  virginica
64           570         2.5          5.0         2.0  virginica
65           580         2.8          5.1         2.4  virginica
66           640         3.2          5.3         2.3  virginica
67           650         3.0          5.5         1.8  virginica
68           770         3.8          6.7         2.2  virginica
69           770         2.6          6.9         2.3  virginica
70           600         2.2          5.0         1.5  virginica
71           690         3.2          5.7         2.3  virginica
72           560         2.8          4.9         2.0  virginica
73           770         2.8          6.7         2.0  virginica
74           630         2.7          4.9         1.8  virginica
75           670         3.3          5.7         2.1  virginica
76           720         3.2          6.0         1.8  virginica
77           620         2.8          4.8         1.8  virginica
78           610         3.0          4.9         1.8  virginica
79           640         2.8          5.6         2.1  virginica
80           720         3.0          5.8         1.6  virginica
81           740         2.8          6.1         1.9  virginica
82           790         3.8          6.4         2.0  virginica
83           640         2.8          5.6         2.2  virginica
84           630         2.8          5.1         1.5  virginica
85           610         2.6          5.6         1.4  virginica
86           770         3.0          6.1         2.3  virginica
87           630         3.4          5.6         2.4  virginica
88           640         3.1          5.5         1.8  virginica
89           600         3.0          4.8         1.8  virginica
90           690         3.1          5.4         2.1  virginica
91           670         3.1          5.6         2.4  virginica
92           690         3.1          5.1         2.3  virginica
93           580         2.7          5.1         1.9  virginica
94           680         3.2          5.9         2.3  virginica
95           670         3.3          5.7         2.5  virginica
96           670         3.0          5.2         2.3  virginica
97           630         2.5          5.0         1.9  virginica
98           650         3.0          5.2         2.0  virginica
99           620         3.4          5.4         2.3  virginica
100          590         3.0          5.1         1.8  virginica</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>stringr<span class="sc">::</span><span class="fu">str_detect</span>(Species, <span class="st">"^v"</span>)))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          510         3.5          1.4         0.2  setosa
2          490         3.0          1.4         0.2  setosa
3          470         3.2          1.3         0.2  setosa
4          460         3.1          1.5         0.2  setosa
5          500         3.6          1.4         0.2  setosa
6          540         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
</section>
<section id="arrange" class="level4" data-number="1.2.4">
<h4 data-number="1.2.4" class="anchored" data-anchor-id="arrange"><span class="header-section-number">1.2.4</span> arrange()</h4>
</section>
<section id="count" class="level4" data-number="1.2.5">
<h4 data-number="1.2.5" class="anchored" data-anchor-id="count"><span class="header-section-number">1.2.5</span> count()</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="fu">table</span>(iris<span class="sc">$</span>Species))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Var1 Freq
1     setosa   50
2 versicolor   50
3  virginica   50</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">count</span>(Species)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Species  n
1     setosa 50
2 versicolor 50
3  virginica 50</code></pre>
</div>
</div>
</section>
<section id="arrange-1" class="level4" data-number="1.2.6">
<h4 data-number="1.2.6" class="anchored" data-anchor-id="arrange-1"><span class="header-section-number">1.2.6</span> arrange()</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>iris[<span class="fu">order</span>(iris<span class="sc">$</span>Sepal.Length, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ]</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
132          790         3.8          6.4         2.0  virginica
118          770         3.8          6.7         2.2  virginica
119          770         2.6          6.9         2.3  virginica
123          770         2.8          6.7         2.0  virginica
136          770         3.0          6.1         2.3  virginica
106          760         3.0          6.6         2.1  virginica
131          740         2.8          6.1         1.9  virginica
108          730         2.9          6.3         1.8  virginica
110          720         3.6          6.1         2.5  virginica
126          720         3.2          6.0         1.8  virginica
130          720         3.0          5.8         1.6  virginica
103          710         3.0          5.9         2.1  virginica
51           700         3.2          4.7         1.4 versicolor
53           690         3.1          4.9         1.5 versicolor
121          690         3.2          5.7         2.3  virginica
140          690         3.1          5.4         2.1  virginica
142          690         3.1          5.1         2.3  virginica
77           680         2.8          4.8         1.4 versicolor
113          680         3.0          5.5         2.1  virginica
144          680         3.2          5.9         2.3  virginica
66           670         3.1          4.4         1.4 versicolor
78           670         3.0          5.0         1.7 versicolor
87           670         3.1          4.7         1.5 versicolor
109          670         2.5          5.8         1.8  virginica
125          670         3.3          5.7         2.1  virginica
141          670         3.1          5.6         2.4  virginica
145          670         3.3          5.7         2.5  virginica
146          670         3.0          5.2         2.3  virginica
59           660         2.9          4.6         1.3 versicolor
76           660         3.0          4.4         1.4 versicolor
55           650         2.8          4.6         1.5 versicolor
105          650         3.0          5.8         2.2  virginica
111          650         3.2          5.1         2.0  virginica
117          650         3.0          5.5         1.8  virginica
148          650         3.0          5.2         2.0  virginica
52           640         3.2          4.5         1.5 versicolor
75           640         2.9          4.3         1.3 versicolor
112          640         2.7          5.3         1.9  virginica
116          640         3.2          5.3         2.3  virginica
129          640         2.8          5.6         2.1  virginica
133          640         2.8          5.6         2.2  virginica
138          640         3.1          5.5         1.8  virginica
57           630         3.3          4.7         1.6 versicolor
73           630         2.5          4.9         1.5 versicolor
88           630         2.3          4.4         1.3 versicolor
101          630         3.3          6.0         2.5  virginica
104          630         2.9          5.6         1.8  virginica
124          630         2.7          4.9         1.8  virginica
134          630         2.8          5.1         1.5  virginica
137          630         3.4          5.6         2.4  virginica
147          630         2.5          5.0         1.9  virginica
69           620         2.2          4.5         1.5 versicolor
98           620         2.9          4.3         1.3 versicolor
127          620         2.8          4.8         1.8  virginica
149          620         3.4          5.4         2.3  virginica
64           610         2.9          4.7         1.4 versicolor
72           610         2.8          4.0         1.3 versicolor
74           610         2.8          4.7         1.2 versicolor
92           610         3.0          4.6         1.4 versicolor
128          610         3.0          4.9         1.8  virginica
135          610         2.6          5.6         1.4  virginica
63           600         2.2          4.0         1.0 versicolor
79           600         2.9          4.5         1.5 versicolor
84           600         2.7          5.1         1.6 versicolor
86           600         3.4          4.5         1.6 versicolor
120          600         2.2          5.0         1.5  virginica
139          600         3.0          4.8         1.8  virginica
62           590         3.0          4.2         1.5 versicolor
71           590         3.2          4.8         1.8 versicolor
150          590         3.0          5.1         1.8  virginica
15           580         4.0          1.2         0.2     setosa
68           580         2.7          4.1         1.0 versicolor
83           580         2.7          3.9         1.2 versicolor
93           580         2.6          4.0         1.2 versicolor
102          580         2.7          5.1         1.9  virginica
115          580         2.8          5.1         2.4  virginica
143          580         2.7          5.1         1.9  virginica
16           570         4.4          1.5         0.4     setosa
19           570         3.8          1.7         0.3     setosa
56           570         2.8          4.5         1.3 versicolor
80           570         2.6          3.5         1.0 versicolor
96           570         3.0          4.2         1.2 versicolor
97           570         2.9          4.2         1.3 versicolor
100          570         2.8          4.1         1.3 versicolor
114          570         2.5          5.0         2.0  virginica
65           560         2.9          3.6         1.3 versicolor
67           560         3.0          4.5         1.5 versicolor
70           560         2.5          3.9         1.1 versicolor
89           560         3.0          4.1         1.3 versicolor
95           560         2.7          4.2         1.3 versicolor
122          560         2.8          4.9         2.0  virginica
34           550         4.2          1.4         0.2     setosa
37           550         3.5          1.3         0.2     setosa
54           550         2.3          4.0         1.3 versicolor
81           550         2.4          3.8         1.1 versicolor
82           550         2.4          3.7         1.0 versicolor
90           550         2.5          4.0         1.3 versicolor
91           550         2.6          4.4         1.2 versicolor
6            540         3.9          1.7         0.4     setosa
11           540         3.7          1.5         0.2     setosa
17           540         3.9          1.3         0.4     setosa
21           540         3.4          1.7         0.2     setosa
32           540         3.4          1.5         0.4     setosa
85           540         3.0          4.5         1.5 versicolor
49           530         3.7          1.5         0.2     setosa
28           520         3.5          1.5         0.2     setosa
29           520         3.4          1.4         0.2     setosa
33           520         4.1          1.5         0.1     setosa
60           520         2.7          3.9         1.4 versicolor
1            510         3.5          1.4         0.2     setosa
18           510         3.5          1.4         0.3     setosa
20           510         3.8          1.5         0.3     setosa
22           510         3.7          1.5         0.4     setosa
24           510         3.3          1.7         0.5     setosa
40           510         3.4          1.5         0.2     setosa
45           510         3.8          1.9         0.4     setosa
47           510         3.8          1.6         0.2     setosa
99           510         2.5          3.0         1.1 versicolor
5            500         3.6          1.4         0.2     setosa
8            500         3.4          1.5         0.2     setosa
26           500         3.0          1.6         0.2     setosa
27           500         3.4          1.6         0.4     setosa
36           500         3.2          1.2         0.2     setosa
41           500         3.5          1.3         0.3     setosa
44           500         3.5          1.6         0.6     setosa
50           500         3.3          1.4         0.2     setosa
61           500         2.0          3.5         1.0 versicolor
94           500         2.3          3.3         1.0 versicolor
2            490         3.0          1.4         0.2     setosa
10           490         3.1          1.5         0.1     setosa
35           490         3.1          1.5         0.2     setosa
38           490         3.6          1.4         0.1     setosa
58           490         2.4          3.3         1.0 versicolor
107          490         2.5          4.5         1.7  virginica
12           480         3.4          1.6         0.2     setosa
13           480         3.0          1.4         0.1     setosa
25           480         3.4          1.9         0.2     setosa
31           480         3.1          1.6         0.2     setosa
46           480         3.0          1.4         0.3     setosa
3            470         3.2          1.3         0.2     setosa
30           470         3.2          1.6         0.2     setosa
4            460         3.1          1.5         0.2     setosa
7            460         3.4          1.4         0.3     setosa
23           460         3.6          1.0         0.2     setosa
48           460         3.2          1.4         0.2     setosa
42           450         2.3          1.3         0.3     setosa
9            440         2.9          1.4         0.2     setosa
39           440         3.0          1.3         0.2     setosa
43           440         3.2          1.3         0.2     setosa
14           430         3.0          1.1         0.1     setosa</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(dplyr<span class="sc">::</span><span class="fu">desc</span>(Sepal.Length))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
1            790         3.8          6.4         2.0  virginica
2            770         3.8          6.7         2.2  virginica
3            770         2.6          6.9         2.3  virginica
4            770         2.8          6.7         2.0  virginica
5            770         3.0          6.1         2.3  virginica
6            760         3.0          6.6         2.1  virginica
7            740         2.8          6.1         1.9  virginica
8            730         2.9          6.3         1.8  virginica
9            720         3.6          6.1         2.5  virginica
10           720         3.2          6.0         1.8  virginica
11           720         3.0          5.8         1.6  virginica
12           710         3.0          5.9         2.1  virginica
13           700         3.2          4.7         1.4 versicolor
14           690         3.1          4.9         1.5 versicolor
15           690         3.2          5.7         2.3  virginica
16           690         3.1          5.4         2.1  virginica
17           690         3.1          5.1         2.3  virginica
18           680         2.8          4.8         1.4 versicolor
19           680         3.0          5.5         2.1  virginica
20           680         3.2          5.9         2.3  virginica
21           670         3.1          4.4         1.4 versicolor
22           670         3.0          5.0         1.7 versicolor
23           670         3.1          4.7         1.5 versicolor
24           670         2.5          5.8         1.8  virginica
25           670         3.3          5.7         2.1  virginica
26           670         3.1          5.6         2.4  virginica
27           670         3.3          5.7         2.5  virginica
28           670         3.0          5.2         2.3  virginica
29           660         2.9          4.6         1.3 versicolor
30           660         3.0          4.4         1.4 versicolor
31           650         2.8          4.6         1.5 versicolor
32           650         3.0          5.8         2.2  virginica
33           650         3.2          5.1         2.0  virginica
34           650         3.0          5.5         1.8  virginica
35           650         3.0          5.2         2.0  virginica
36           640         3.2          4.5         1.5 versicolor
37           640         2.9          4.3         1.3 versicolor
38           640         2.7          5.3         1.9  virginica
39           640         3.2          5.3         2.3  virginica
40           640         2.8          5.6         2.1  virginica
41           640         2.8          5.6         2.2  virginica
42           640         3.1          5.5         1.8  virginica
43           630         3.3          4.7         1.6 versicolor
44           630         2.5          4.9         1.5 versicolor
45           630         2.3          4.4         1.3 versicolor
46           630         3.3          6.0         2.5  virginica
47           630         2.9          5.6         1.8  virginica
48           630         2.7          4.9         1.8  virginica
49           630         2.8          5.1         1.5  virginica
50           630         3.4          5.6         2.4  virginica
51           630         2.5          5.0         1.9  virginica
52           620         2.2          4.5         1.5 versicolor
53           620         2.9          4.3         1.3 versicolor
54           620         2.8          4.8         1.8  virginica
55           620         3.4          5.4         2.3  virginica
56           610         2.9          4.7         1.4 versicolor
57           610         2.8          4.0         1.3 versicolor
58           610         2.8          4.7         1.2 versicolor
59           610         3.0          4.6         1.4 versicolor
60           610         3.0          4.9         1.8  virginica
61           610         2.6          5.6         1.4  virginica
62           600         2.2          4.0         1.0 versicolor
63           600         2.9          4.5         1.5 versicolor
64           600         2.7          5.1         1.6 versicolor
65           600         3.4          4.5         1.6 versicolor
66           600         2.2          5.0         1.5  virginica
67           600         3.0          4.8         1.8  virginica
68           590         3.0          4.2         1.5 versicolor
69           590         3.2          4.8         1.8 versicolor
70           590         3.0          5.1         1.8  virginica
71           580         4.0          1.2         0.2     setosa
72           580         2.7          4.1         1.0 versicolor
73           580         2.7          3.9         1.2 versicolor
74           580         2.6          4.0         1.2 versicolor
75           580         2.7          5.1         1.9  virginica
76           580         2.8          5.1         2.4  virginica
77           580         2.7          5.1         1.9  virginica
78           570         4.4          1.5         0.4     setosa
79           570         3.8          1.7         0.3     setosa
80           570         2.8          4.5         1.3 versicolor
81           570         2.6          3.5         1.0 versicolor
82           570         3.0          4.2         1.2 versicolor
83           570         2.9          4.2         1.3 versicolor
84           570         2.8          4.1         1.3 versicolor
85           570         2.5          5.0         2.0  virginica
86           560         2.9          3.6         1.3 versicolor
87           560         3.0          4.5         1.5 versicolor
88           560         2.5          3.9         1.1 versicolor
89           560         3.0          4.1         1.3 versicolor
90           560         2.7          4.2         1.3 versicolor
91           560         2.8          4.9         2.0  virginica
92           550         4.2          1.4         0.2     setosa
93           550         3.5          1.3         0.2     setosa
94           550         2.3          4.0         1.3 versicolor
95           550         2.4          3.8         1.1 versicolor
96           550         2.4          3.7         1.0 versicolor
97           550         2.5          4.0         1.3 versicolor
98           550         2.6          4.4         1.2 versicolor
99           540         3.9          1.7         0.4     setosa
100          540         3.7          1.5         0.2     setosa
101          540         3.9          1.3         0.4     setosa
102          540         3.4          1.7         0.2     setosa
103          540         3.4          1.5         0.4     setosa
104          540         3.0          4.5         1.5 versicolor
105          530         3.7          1.5         0.2     setosa
106          520         3.5          1.5         0.2     setosa
107          520         3.4          1.4         0.2     setosa
108          520         4.1          1.5         0.1     setosa
109          520         2.7          3.9         1.4 versicolor
110          510         3.5          1.4         0.2     setosa
111          510         3.5          1.4         0.3     setosa
112          510         3.8          1.5         0.3     setosa
113          510         3.7          1.5         0.4     setosa
114          510         3.3          1.7         0.5     setosa
115          510         3.4          1.5         0.2     setosa
116          510         3.8          1.9         0.4     setosa
117          510         3.8          1.6         0.2     setosa
118          510         2.5          3.0         1.1 versicolor
119          500         3.6          1.4         0.2     setosa
120          500         3.4          1.5         0.2     setosa
121          500         3.0          1.6         0.2     setosa
122          500         3.4          1.6         0.4     setosa
123          500         3.2          1.2         0.2     setosa
124          500         3.5          1.3         0.3     setosa
125          500         3.5          1.6         0.6     setosa
126          500         3.3          1.4         0.2     setosa
127          500         2.0          3.5         1.0 versicolor
128          500         2.3          3.3         1.0 versicolor
129          490         3.0          1.4         0.2     setosa
130          490         3.1          1.5         0.1     setosa
131          490         3.1          1.5         0.2     setosa
132          490         3.6          1.4         0.1     setosa
133          490         2.4          3.3         1.0 versicolor
134          490         2.5          4.5         1.7  virginica
135          480         3.4          1.6         0.2     setosa
136          480         3.0          1.4         0.1     setosa
137          480         3.4          1.9         0.2     setosa
138          480         3.1          1.6         0.2     setosa
139          480         3.0          1.4         0.3     setosa
140          470         3.2          1.3         0.2     setosa
141          470         3.2          1.6         0.2     setosa
142          460         3.1          1.5         0.2     setosa
143          460         3.4          1.4         0.3     setosa
144          460         3.6          1.0         0.2     setosa
145          460         3.2          1.4         0.2     setosa
146          450         2.3          1.3         0.3     setosa
147          440         2.9          1.4         0.2     setosa
148          440         3.0          1.3         0.2     setosa
149          440         3.2          1.3         0.2     setosa
150          430         3.0          1.1         0.1     setosa</code></pre>
</div>
</div>
</section>
<section id="summarise" class="level4" data-number="1.2.7">
<h4 data-number="1.2.7" class="anchored" data-anchor-id="summarise"><span class="header-section-number">1.2.7</span> summarise()</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(<span class="fu">split</span>(iris<span class="sc">$</span>Sepal.Length, iris<span class="sc">$</span>Species), mean)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    setosa versicolor  virginica 
     500.6      593.6      658.8 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">value =</span> <span class="fu">mean</span>(Sepal.Length))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  Species    value
  &lt;fct&gt;      &lt;dbl&gt;
1 setosa      501.
2 versicolor  594.
3 virginica   659.</code></pre>
</div>
</div>
</section>
<section id="group_by" class="level4" data-number="1.2.8">
<h4 data-number="1.2.8" class="anchored" data-anchor-id="group_by"><span class="header-section-number">1.2.8</span> group_by</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(<span class="fu">split</span>(iris, iris<span class="sc">$</span>Species), nrow)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    setosa versicolor  virginica 
        50         50         50 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>()</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
# Groups:   Species [3]
  Species        n
  &lt;fct&gt;      &lt;int&gt;
1 setosa        50
2 versicolor    50
3 virginica     50</code></pre>
</div>
</div>
</section>
</section>
<section id="readr" class="level3" data-number="1.3">
<h3 data-number="1.3" class="anchored" data-anchor-id="readr"><span class="header-section-number">1.3</span> readr</h3>
<p><a href="https://readr.tidyverse.org/">readr</a></p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "コピーしました");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "コピーしました");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>