<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 基礎 | Rの使い方</title>
  <meta name="description" content="2 基礎 | Rの使い方" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="2 基礎 | Rの使い方" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 基礎 | Rの使い方" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="1-まずは使ってみる.html"/>
<link rel="next" href="3-ファイル操作.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Rの使い方</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>はしがき</a></li>
<li class="chapter" data-level="1" data-path="1-まずは使ってみる.html"><a href="1-まずは使ってみる.html"><i class="fa fa-check"></i><b>1</b> まずは使ってみる</a>
<ul>
<li class="chapter" data-level="1.1" data-path="1-まずは使ってみる.html"><a href="1-まずは使ってみる.html#環境構築"><i class="fa fa-check"></i><b>1.1</b> 環境構築</a></li>
<li class="chapter" data-level="1.2" data-path="1-まずは使ってみる.html"><a href="1-まずは使ってみる.html#基本操作"><i class="fa fa-check"></i><b>1.2</b> 基本操作</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="1-まずは使ってみる.html"><a href="1-まずは使ってみる.html#四則演算"><i class="fa fa-check"></i><b>1.2.1</b> 四則演算</a></li>
<li class="chapter" data-level="1.2.2" data-path="1-まずは使ってみる.html"><a href="1-まずは使ってみる.html#変数"><i class="fa fa-check"></i><b>1.2.2</b> 変数</a></li>
<li class="chapter" data-level="1.2.3" data-path="1-まずは使ってみる.html"><a href="1-まずは使ってみる.html#関数"><i class="fa fa-check"></i><b>1.2.3</b> 関数</a></li>
<li class="chapter" data-level="1.2.4" data-path="1-まずは使ってみる.html"><a href="1-まずは使ってみる.html#ベクトル"><i class="fa fa-check"></i><b>1.2.4</b> ベクトル</a></li>
<li class="chapter" data-level="1.2.5" data-path="1-まずは使ってみる.html"><a href="1-まずは使ってみる.html#パッケージ"><i class="fa fa-check"></i><b>1.2.5</b> パッケージ</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="1-まずは使ってみる.html"><a href="1-まずは使ってみる.html#練習問題"><i class="fa fa-check"></i><b>1.3</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-基礎.html"><a href="2-基礎.html"><i class="fa fa-check"></i><b>2</b> 基礎</a>
<ul>
<li class="chapter" data-level="2.1" data-path="2-基礎.html"><a href="2-基礎.html#データの型"><i class="fa fa-check"></i><b>2.1</b> データの型</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="2-基礎.html"><a href="2-基礎.html#数値"><i class="fa fa-check"></i><b>2.1.1</b> 数値</a></li>
<li class="chapter" data-level="2.1.2" data-path="2-基礎.html"><a href="2-基礎.html#文字列"><i class="fa fa-check"></i><b>2.1.2</b> 文字列</a></li>
<li class="chapter" data-level="2.1.3" data-path="2-基礎.html"><a href="2-基礎.html#ファクター"><i class="fa fa-check"></i><b>2.1.3</b> ファクター</a></li>
<li class="chapter" data-level="2.1.4" data-path="2-基礎.html"><a href="2-基礎.html#論理値"><i class="fa fa-check"></i><b>2.1.4</b> 論理値</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-基礎.html"><a href="2-基礎.html#データの構造"><i class="fa fa-check"></i><b>2.2</b> データの構造</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="2-基礎.html"><a href="2-基礎.html#ベクトル-1"><i class="fa fa-check"></i><b>2.2.1</b> ベクトル</a></li>
<li class="chapter" data-level="2.2.2" data-path="2-基礎.html"><a href="2-基礎.html#名前付きベクトル"><i class="fa fa-check"></i><b>2.2.2</b> 名前付きベクトル</a></li>
<li class="chapter" data-level="2.2.3" data-path="2-基礎.html"><a href="2-基礎.html#行列"><i class="fa fa-check"></i><b>2.2.3</b> 行列</a></li>
<li class="chapter" data-level="2.2.4" data-path="2-基礎.html"><a href="2-基礎.html#データフレーム"><i class="fa fa-check"></i><b>2.2.4</b> データフレーム</a></li>
<li class="chapter" data-level="2.2.5" data-path="2-基礎.html"><a href="2-基礎.html#リスト"><i class="fa fa-check"></i><b>2.2.5</b> リスト</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="2-基礎.html"><a href="2-基礎.html#特殊記号"><i class="fa fa-check"></i><b>2.3</b> 特殊記号</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="2-基礎.html"><a href="2-基礎.html#コメント"><i class="fa fa-check"></i><b>2.3.1</b> コメント</a></li>
<li class="chapter" data-level="2.3.2" data-path="2-基礎.html"><a href="2-基礎.html#セミコロン"><i class="fa fa-check"></i><b>2.3.2</b> セミコロン</a></li>
<li class="chapter" data-level="2.3.3" data-path="2-基礎.html"><a href="2-基礎.html#評価と同時に返り値を表示"><i class="fa fa-check"></i><b>2.3.3</b> 評価と同時に返り値を表示</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="2-基礎.html"><a href="2-基礎.html#入門書"><i class="fa fa-check"></i><b>2.4</b> 入門書</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="2-基礎.html"><a href="2-基礎.html#チートシート"><i class="fa fa-check"></i><b>2.4.1</b> チートシート</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="2-基礎.html"><a href="2-基礎.html#練習問題-1"><i class="fa fa-check"></i><b>2.5</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html"><i class="fa fa-check"></i><b>3</b> ファイル操作</a>
<ul>
<li class="chapter" data-level="3.1" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#ファイルの読み込み"><i class="fa fa-check"></i><b>3.1</b> ファイルの読み込み</a></li>
<li class="chapter" data-level="3.2" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#ディレクトリ構造とファイル管理の基礎"><i class="fa fa-check"></i><b>3.2</b> ディレクトリ構造とファイル管理の基礎</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#ディレクトリ構造"><i class="fa fa-check"></i><b>3.2.1</b> ディレクトリ構造</a></li>
<li class="chapter" data-level="3.2.2" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#ファイル管理"><i class="fa fa-check"></i><b>3.2.2</b> ファイル管理</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#作業ディレクトリ"><i class="fa fa-check"></i><b>3.3</b> 作業ディレクトリ</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#rのコードの保存"><i class="fa fa-check"></i><b>3.3.1</b> Rのコードの保存</a></li>
<li class="chapter" data-level="3.3.2" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#作業ディレクトリの変更"><i class="fa fa-check"></i><b>3.3.2</b> 作業ディレクトリの変更</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#絶対パス"><i class="fa fa-check"></i><b>3.4</b> 絶対パス</a></li>
<li class="chapter" data-level="3.5" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#相対パス"><i class="fa fa-check"></i><b>3.5</b> 相対パス</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#tips-2"><i class="fa fa-check"></i><b>3.5.1</b> Tips</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#ファイル出力"><i class="fa fa-check"></i><b>3.6</b> ファイル出力</a></li>
<li class="chapter" data-level="3.7" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#microsoft-365"><i class="fa fa-check"></i><b>3.7</b> Microsoft 365</a></li>
<li class="chapter" data-level="3.8" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#ロケールの変更"><i class="fa fa-check"></i><b>3.8</b> ロケールの変更</a></li>
<li class="chapter" data-level="3.9" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#unicodeエスケープシーケンス"><i class="fa fa-check"></i><b>3.9</b> Unicodeエスケープシーケンス</a></li>
<li class="chapter" data-level="3.10" data-path="3-ファイル操作.html"><a href="3-ファイル操作.html#練習問題-2"><i class="fa fa-check"></i><b>3.10</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-比較演算.html"><a href="4-比較演算.html"><i class="fa fa-check"></i><b>4</b> 比較演算</a>
<ul>
<li class="chapter" data-level="4.1" data-path="4-比較演算.html"><a href="4-比較演算.html#比較演算-1"><i class="fa fa-check"></i><b>4.1</b> 比較演算</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="4-比較演算.html"><a href="4-比較演算.html#数値-1"><i class="fa fa-check"></i><b>4.1.1</b> 数値</a></li>
<li class="chapter" data-level="4.1.2" data-path="4-比較演算.html"><a href="4-比較演算.html#文字列-1"><i class="fa fa-check"></i><b>4.1.2</b> 文字列</a></li>
<li class="chapter" data-level="4.1.3" data-path="4-比較演算.html"><a href="4-比較演算.html#正規表現"><i class="fa fa-check"></i><b>4.1.3</b> 正規表現</a></li>
<li class="chapter" data-level="4.1.4" data-path="4-比較演算.html"><a href="4-比較演算.html#集合"><i class="fa fa-check"></i><b>4.1.4</b> 集合</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="4-比較演算.html"><a href="4-比較演算.html#条件分岐"><i class="fa fa-check"></i><b>4.2</b> 条件分岐</a></li>
<li class="chapter" data-level="4.3" data-path="4-比較演算.html"><a href="4-比較演算.html#繰り返し処理"><i class="fa fa-check"></i><b>4.3</b> 繰り返し処理</a></li>
<li class="chapter" data-level="4.4" data-path="4-比較演算.html"><a href="4-比較演算.html#データクリーニング"><i class="fa fa-check"></i><b>4.4</b> データ・クリーニング</a></li>
<li class="chapter" data-level="4.5" data-path="4-比較演算.html"><a href="4-比較演算.html#関数の作成"><i class="fa fa-check"></i><b>4.5</b> 関数の作成</a></li>
<li class="chapter" data-level="4.6" data-path="4-比較演算.html"><a href="4-比較演算.html#練習問題-3"><i class="fa fa-check"></i><b>4.6</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-作図.html"><a href="5-作図.html"><i class="fa fa-check"></i><b>5</b> 作図</a>
<ul>
<li class="chapter" data-level="5.1" data-path="5-作図.html"><a href="5-作図.html#どんな図を作成できるのか"><i class="fa fa-check"></i><b>5.1</b> どんな図を作成できるのか</a></li>
<li class="chapter" data-level="5.2" data-path="5-作図.html"><a href="5-作図.html#プロット"><i class="fa fa-check"></i><b>5.2</b> プロット</a></li>
<li class="chapter" data-level="5.3" data-path="5-作図.html"><a href="5-作図.html#保存"><i class="fa fa-check"></i><b>5.3</b> 保存</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-tidyverse.html"><a href="6-tidyverse.html"><i class="fa fa-check"></i><b>6</b> tidyverse</a>
<ul>
<li class="chapter" data-level="6.1" data-path="6-tidyverse.html"><a href="6-tidyverse.html#base-r"><i class="fa fa-check"></i><b>6.1</b> base R</a></li>
<li class="chapter" data-level="6.2" data-path="6-tidyverse.html"><a href="6-tidyverse.html#tidyverse-1"><i class="fa fa-check"></i><b>6.2</b> tidyverse</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="6-tidyverse.html"><a href="6-tidyverse.html#データフレーム-1"><i class="fa fa-check"></i><b>6.2.1</b> データフレーム</a></li>
<li class="chapter" data-level="6.2.2" data-path="6-tidyverse.html"><a href="6-tidyverse.html#よく使う関数"><i class="fa fa-check"></i><b>6.2.2</b> よく使う関数</a></li>
<li class="chapter" data-level="6.2.3" data-path="6-tidyverse.html"><a href="6-tidyverse.html#どちらを使えばよいのか"><i class="fa fa-check"></i><b>6.2.3</b> どちらを使えばよいのか</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="6-tidyverse.html"><a href="6-tidyverse.html#練習問題-4"><i class="fa fa-check"></i><b>6.3</b> 練習問題</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Rの使い方</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="基礎" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> 基礎<a href="2-基礎.html#基礎" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>今回は，前回の練習問題の解答について解説しつつ，Rの基礎を学びます。
とくにデータの型と構造について理解しておかなければなりません。</p>
<p>Rを使うとき，常に，「このコードを実行するとこうなるはずだ」と予想してください。
予想通りの結果が得られた場合，自分の予想は正しかったことが確かめられます。
予想とは異なる結果が得られた場合，2つの原因が考えられます。</p>
<ol style="list-style-type: decimal">
<li>予想の元となった自分の考えが間違っていた。</li>
<li>コードが間違っている。</li>
</ol>
<p>どちらが原因で予想と異なる結果が得られたかを考えてください。
前者の場合は自分の考えを改める必要があります。
Rの学習は，この予想と結果を合わせていく作業です。
常に，予想した結果が得られなければなりません。</p>
<div id="データの型" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> データの型<a href="2-基礎.html#データの型" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>データの型には，数値，文字列，ファクター（因子），論理値があります。
以下のどれかのコマンドを使って，そのデータの型を知ることができます。</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="2-基礎.html#cb55-1" tabindex="-1"></a><span class="fu">typeof</span>()</span>
<span id="cb55-2"><a href="2-基礎.html#cb55-2" tabindex="-1"></a><span class="fu">mode</span>()</span>
<span id="cb55-3"><a href="2-基礎.html#cb55-3" tabindex="-1"></a><span class="fu">class</span>()</span></code></pre></div>
<p>ただし，常に意識するというよりは，エラーの原因追及（バグフィックス）時に必要な知識です。
このため，自分が書いたスクリプトにバグが入らないようにしたいなら，このデータの型を意識しておかなければなりません。
データの型には次の種類があります。</p>
<ol style="list-style-type: decimal">
<li>実数</li>
<li>整数</li>
<li>文字列</li>
<li>ファクター</li>
<li>論理値</li>
</ol>
<div id="数値" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> 数値<a href="2-基礎.html#数値" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>実数と整数はいずれも数値で，区別しなくても困りません。
数値は計算できます。
任意のオブジェクトが数値かどうかを判定したいときは，<code>is.double()</code> または <code>is.numeric()</code> を用います。</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="2-基礎.html#cb56-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb56-2"><a href="2-基礎.html#cb56-2" tabindex="-1"></a><span class="fu">is.double</span>(x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="2-基礎.html#cb58-1" tabindex="-1"></a><span class="co"># is.numeric(x)</span></span></code></pre></div>
<p>返り値の <code>TRUE</code> は真という意味で，判定（知りたいこと）が真のときに <code>TRUE</code> が返ってきます。</p>
<p>Rではデフォルトで数値は実数として扱われます。
数字を扱うにあたって，それ以上のことを考える必要はありません。
もし整数として明示的に扱いたい場合は，次の関係を知っておいてください。</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="2-基礎.html#cb59-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb59-2"><a href="2-基礎.html#cb59-2" tabindex="-1"></a><span class="fu">is.integer</span>(x)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="2-基礎.html#cb61-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span><span class="dt">L</span></span>
<span id="cb61-2"><a href="2-基礎.html#cb61-2" tabindex="-1"></a><span class="fu">is.integer</span>(x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="2-基礎.html#cb63-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="dv">10</span>)</span>
<span id="cb63-2"><a href="2-基礎.html#cb63-2" tabindex="-1"></a><span class="fu">is.integer</span>(x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>また，整数は整数として意識的に維持しなければ，容易に実数に変化します。</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="2-基礎.html#cb65-1" tabindex="-1"></a><span class="dv">10</span><span class="dt">L</span> <span class="sc">+</span> <span class="dv">2</span>; <span class="fu">is.integer</span>(<span class="dv">10</span><span class="dt">L</span> <span class="sc">+</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="2-基礎.html#cb68-1" tabindex="-1"></a><span class="dv">10</span><span class="dt">L</span> <span class="sc">+</span> <span class="dv">2</span><span class="dt">L</span>; <span class="fu">is.integer</span>(<span class="dv">10</span><span class="dt">L</span> <span class="sc">+</span> <span class="dv">2</span><span class="dt">L</span>)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>多くの場合，数値を扱いたい場合は，整数ではなく，実数を使って問題ありません。</p>
</div>
<div id="文字列" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> 文字列<a href="2-基礎.html#文字列" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>文字列は文字として表現されるもので，<code>""</code> で括って表記します。</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="2-基礎.html#cb71-1" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;あ&quot;</span>, <span class="st">&#39;b&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot;  &quot;あ&quot; &quot;b&quot;</code></pre>
<p>多くの場合，<code>""</code> は <code>''</code> で代替できます。
ただし，Rの返り値は必ず <code>""</code> で括られますので，<code>''</code> ではなく <code>""</code> を使うようにしてください。</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="2-基礎.html#cb73-1" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;あ&quot;</span>, <span class="st">&quot;b&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot;  &quot;あ&quot; &quot;b&quot;</code></pre>
<p>文字列の中に <code>"</code> を入れたい場合に <code>''</code> を使うとよいです。</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="2-基礎.html#cb75-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&#39;&quot;あ&quot;&#39;</span></span>
<span id="cb75-2"><a href="2-基礎.html#cb75-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] &quot;\&quot;あ\&quot;&quot;</code></pre>
<p>返り値がおかしいですね。
いや，これでいいのです。
<code>\</code> のことを<strong>エスケープシーケンス</strong>と呼びます。</p>
<p>エスケープシーケンスを使うと，文字列は常に <code>""</code> で括れます。</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="2-基礎.html#cb77-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">あ</span><span class="sc">\&quot;</span><span class="st">&quot;</span></span>
<span id="cb77-2"><a href="2-基礎.html#cb77-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] &quot;\&quot;あ\&quot;&quot;</code></pre>
<p>文字列をくっつける関数に <code>paste()</code> があります。
次のように使います。</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="2-基礎.html#cb79-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;愛媛&quot;</span></span>
<span id="cb79-2"><a href="2-基礎.html#cb79-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="st">&quot;県&quot;</span></span>
<span id="cb79-3"><a href="2-基礎.html#cb79-3" tabindex="-1"></a><span class="fu">paste</span>(x, y)</span></code></pre></div>
<pre><code>## [1] &quot;愛媛 県&quot;</code></pre>
<p>デフォルトでは結合部分に半角スペースが入ります。
結合部分に入れる文字は，引数 <code>sep</code> で指定します。
何も入れたくない場合は，次のようにします。</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="2-基礎.html#cb81-1" tabindex="-1"></a><span class="fu">paste</span>(x, y, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;愛媛県&quot;</code></pre>
<p>数値を文字列に変換する場合は，<code>as.character()</code> を使います。
ただし，<code>paste()</code> の方が便利なため，<code>paste()</code> を頻繁に使うことになるでしょう。
例えば次のようにします。</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="2-基礎.html#cb83-1" tabindex="-1"></a><span class="fu">paste</span>(<span class="dv">2000</span><span class="sc">:</span><span class="dv">2010</span>, <span class="st">&quot;年&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;2000年&quot; &quot;2001年&quot; &quot;2002年&quot; &quot;2003年&quot; &quot;2004年&quot; &quot;2005年&quot; &quot;2006年&quot; &quot;2007年&quot;
##  [9] &quot;2008年&quot; &quot;2009年&quot; &quot;2010年&quot;</code></pre>
<p><code>paste()</code> は文字列を繋げる関数です。
引数には文字列を取りますので，引数に数値がある場合は，勝手に文字列に変換されます。</p>
</div>
<div id="ファクター" class="section level3 hasAnchor" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> ファクター<a href="2-基礎.html#ファクター" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>ファクターは見た目は文字列ですが，以下の特徴があります。</p>
<ul>
<li>取り得る値の数が有限である。</li>
<li>グループ分けに使える。</li>
<li>値に順番のようなものがある。</li>
</ul>
<p>例えば，学生の成績は「秀」「優」「良」「可」「不可」で表現されます。
あるいは，「S」「A」「B」「C」「D」といった表現もあります。
これらの文字列には順番があります。
「秀」は「優」より上，「優」は「良」より上です。</p>
<p>また，「愛媛県」は文字列で，一見順番は関係なさそうですが，都道府県コードというものが割り振られており，都道府県別に並べるとき，愛媛県は38番目に表示するというルールがあります。
「北海道」が01で，「沖縄県」が47です。
他に，アンケート調査の選択のある問に対する解答として，「強くそう思う」「ややそう思う」「どちらでもない」「あまりそう思わない」「まったくそう思わない」といったデータがあり得ます。</p>
<p>こうしたデータを扱う場合，ファクターを文字列として考えていると，思い通りの表示にならなかったり，処理できずエラーが返ってくることがあります。</p>
<p>次のデータがあったとします。</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="2-基礎.html#cb85-1" tabindex="-1"></a>grade <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;優&quot;</span>, <span class="st">&quot;良&quot;</span>, <span class="st">&quot;可&quot;</span>, <span class="st">&quot;良&quot;</span>, <span class="st">&quot;良&quot;</span>, <span class="st">&quot;不可&quot;</span>, <span class="st">&quot;秀&quot;</span>, <span class="st">&quot;優&quot;</span>, <span class="st">&quot;可&quot;</span>, <span class="st">&quot;良&quot;</span>)</span>
<span id="cb85-2"><a href="2-基礎.html#cb85-2" tabindex="-1"></a>grade</span></code></pre></div>
<pre><code>##  [1] &quot;優&quot;   &quot;良&quot;   &quot;可&quot;   &quot;良&quot;   &quot;良&quot;   &quot;不可&quot; &quot;秀&quot;   &quot;優&quot;   &quot;可&quot;   &quot;良&quot;</code></pre>
<p>この変数 <code>grade</code> に順番のようなものを持たせるためには，次のようにします。</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="2-基礎.html#cb87-1" tabindex="-1"></a>grade2 <span class="ot">&lt;-</span> <span class="fu">factor</span>(grade, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;不可&quot;</span>, <span class="st">&quot;可&quot;</span>, <span class="st">&quot;良&quot;</span>, <span class="st">&quot;優&quot;</span>, <span class="st">&quot;秀&quot;</span>))</span>
<span id="cb87-2"><a href="2-基礎.html#cb87-2" tabindex="-1"></a>grade2</span></code></pre></div>
<pre><code>##  [1] 優   良   可   良   良   不可 秀   優   可   良  
## Levels: 不可 可 良 優 秀</code></pre>
<p>ファクターの返り値に順番が <code>Levels</code> として表記されます。
この <code>Levels</code> はファクターに付けられたラベルであり，次のコマンドで取り出せます。</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="2-基礎.html#cb89-1" tabindex="-1"></a><span class="fu">levels</span>(grade2)</span></code></pre></div>
<pre><code>## [1] &quot;不可&quot; &quot;可&quot;   &quot;良&quot;   &quot;優&quot;   &quot;秀&quot;</code></pre>
<p>ファクターのラベルを変更すれば，ファクターの各要素の値も変わります。</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="2-基礎.html#cb91-1" tabindex="-1"></a><span class="fu">levels</span>(grade2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;D&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;S&quot;</span>)</span>
<span id="cb91-2"><a href="2-基礎.html#cb91-2" tabindex="-1"></a>grade2</span></code></pre></div>
<pre><code>##  [1] A B C B B D S A C B
## Levels: D C B A S</code></pre>
<p>ファクターを文字列に変換すれば，ラベル（順番の情報）は失われます。</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="2-基礎.html#cb93-1" tabindex="-1"></a><span class="fu">as.character</span>(grade2)</span></code></pre></div>
<pre><code>##  [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;B&quot; &quot;B&quot; &quot;D&quot; &quot;S&quot; &quot;A&quot; &quot;C&quot; &quot;B&quot;</code></pre>
<p>上述の説明は<strong>順番のようなもの</strong>の存在を暗黙裏に扱っており，通常の使用ではこれで問題ありません。
もし明示的に<strong>順番</strong>を扱いたい場合は，次のようにする必要があります。</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="2-基礎.html#cb95-1" tabindex="-1"></a><span class="fu">factor</span>(grade, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;不可&quot;</span>, <span class="st">&quot;可&quot;</span>, <span class="st">&quot;良&quot;</span>, <span class="st">&quot;優&quot;</span>, <span class="st">&quot;秀&quot;</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##  [1] 優   良   可   良   良   不可 秀   優   可   良  
## Levels: 不可 &lt; 可 &lt; 良 &lt; 優 &lt; 秀</code></pre>
<p>また，上述のアンケート調査の例では，実際は，ファクターではなく，数値に変換して分析することもあります。</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="2-基礎.html#cb97-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">factor</span>(grade, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;不可&quot;</span>, <span class="st">&quot;可&quot;</span>, <span class="st">&quot;良&quot;</span>, <span class="st">&quot;優&quot;</span>, <span class="st">&quot;秀&quot;</span>))</span>
<span id="cb97-2"><a href="2-基礎.html#cb97-2" tabindex="-1"></a><span class="fu">as.double</span>(x)</span></code></pre></div>
<pre><code>##  [1] 4 3 2 3 3 1 5 4 2 3</code></pre>
</div>
<div id="論理値" class="section level3 hasAnchor" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> 論理値<a href="2-基礎.html#論理値" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>オブジェクトの状態を表すものに，<code>TRUE</code> と <code>FALSE</code> があります。
日本語では，<code>TRUE</code> は真で，<code>FALSE</code> で偽と表現します。
これまで関数の引数として登場しました。</p>
<p><code>TRUE</code> は <code>T</code> と省略でき，<code>FALSE</code> は <code>F</code> と省略できることを知っておいてください。
ただし，自分では <code>T</code> や <code>F</code> を使わないでください。
複雑なコードのときに，<code>T</code> や <code>F</code> よりも，<code>TRUE</code> や <code>FALSE</code> の方が分かりやすいからです。
もしどこかで<code>T</code> や <code>F</code> を見かけたら，頭の中でそれぞれ <code>TRUE</code> と <code>FALSE</code> に置き換えてください。
なお，<code>True</code> や <code>true</code> ではなく，必ず大文字を使ってください。</p>
<p>論理値は，真偽を確かめたいときに関数の返り値として用いられます。
このとき，論理値が計算できることを知っておくと役に立つ場面がある。</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="2-基礎.html#cb99-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">TRUE</span>, <span class="dv">10</span>)</span>
<span id="cb99-2"><a href="2-基礎.html#cb99-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="2-基礎.html#cb101-1" tabindex="-1"></a><span class="fu">sum</span>(x)</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>この例のように，<code>TRUE</code> のベクトルをわざわざ生成することは実際はあまりありませんが，比較演算子を用いた判定の返り値を計算に利用することはよくあります。
このとき，<code>sum()</code> は <code>TRUE</code> の数に一致します。
つまり，<code>TRUE</code> の数を数えていると理解してもよいです。
実際には，R内部で <code>TRUE</code> は数値の <code>1</code> に変換され，<code>FALSE</code> は数値の <code>0</code> に変換された後，<code>sum()</code> が適用されています。</p>
</div>
</div>
<div id="データの構造" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> データの構造<a href="2-基礎.html#データの構造" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>データの構造には以下の種類のものがあります。</p>
<ol style="list-style-type: decimal">
<li>ベクトル</li>
<li>行列</li>
<li>データフレーム</li>
<li>リスト</li>
</ol>
<div id="ベクトル-1" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> ベクトル<a href="2-基礎.html#ベクトル-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>ベクトルは，<code>c()</code> で作成します。</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="2-基礎.html#cb103-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">15</span>, <span class="dv">20</span>)</span></code></pre></div>
<pre><code>## [1] 10 12 15 20</code></pre>
<p><code>seq()</code> などの関数のように，返り値がベクトルとなるものもあります。</p>
<p>ベクトルの四則演算はベクトルを返します。</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="2-基礎.html#cb105-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">15</span>, <span class="dv">20</span>) <span class="sc">*</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>## [1]  50  60  75 100</code></pre>
<p>列ベクトルか行ベクトルかはあまり気にする必要はありません。
ベクトルの転置は次のようにします。</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="2-基礎.html#cb107-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1990</span><span class="sc">:</span><span class="dv">2020</span></span>
<span id="cb107-2"><a href="2-基礎.html#cb107-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1] 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000 2001 2002 2003 2004
## [16] 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019
## [31] 2020</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="2-基礎.html#cb109-1" tabindex="-1"></a><span class="fu">t</span>(x)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
## [1,] 1990 1991 1992 1993 1994 1995 1996 1997 1998  1999  2000  2001  2002  2003
##      [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]
## [1,]  2004  2005  2006  2007  2008  2009  2010  2011  2012  2013  2014  2015
##      [,27] [,28] [,29] [,30] [,31]
## [1,]  2016  2017  2018  2019  2020</code></pre>
<p>このことから，<code>x</code> と <code>x</code> を転置した <code>t(x)</code> は違うことが分かります。</p>
<p>ベクトルは数値である必要はなく，文字列のベクトルも作成できます。</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="2-基礎.html#cb111-1" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;テニス&quot;</span>, <span class="st">&quot;バレーボール&quot;</span>, <span class="st">&quot;野球&quot;</span>, <span class="st">&quot;サッカー&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;テニス&quot;       &quot;バレーボール&quot; &quot;野球&quot;         &quot;サッカー&quot;</code></pre>
<p>ただし，ベクトルの各要素の型は同じでなければなりません。
例えば，数値と文字列を混ぜた場合，そのベクトルは文字列になります。</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="2-基礎.html#cb113-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">&quot;テニス&quot;</span>, <span class="dv">3</span>)</span>
<span id="cb113-2"><a href="2-基礎.html#cb113-2" tabindex="-1"></a>x[<span class="dv">1</span>] <span class="sc">+</span> x[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## Error in x[1] + x[3]: 二項演算子の引数が数値ではありません</code></pre>
<p>文字列は，たとえ見た目が数値であったとしても，計算できません。
文字列は必ず <code>""</code> で括られています。</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="2-基礎.html#cb115-1" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] &quot;1&quot;      &quot;テニス&quot; &quot;3&quot;</code></pre>
<p>ただし，文字列の中が数値の場合，その文字列は数値に変換できます。
文字列を数値に変換する場合は，<code>as.double()</code> を用います。</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="2-基礎.html#cb117-1" tabindex="-1"></a><span class="fu">as.double</span>(x[<span class="dv">1</span>]) <span class="sc">+</span> <span class="fu">as.double</span>(x[<span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>次のように，<code>as.numeric()</code> でも同じ結果が得られますが，文字列を数値に変換する場合，<code>as.double()</code> を使う方が（おそらく）正当なやり方です。</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="2-基礎.html#cb119-1" tabindex="-1"></a><span class="fu">as.numeric</span>(x[<span class="dv">1</span>]) <span class="sc">+</span> <span class="fu">as.numeric</span>(x[<span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div id="欠損値" class="section level4 hasAnchor" number="2.2.1.1">
<h4><span class="header-section-number">2.2.1.1</span> 欠損値<a href="2-基礎.html#欠損値" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>データがない部分のことを欠損値と言います。
数値の欠損値は <code>NA</code> で表します。
例えば，アンケート調査を実施して，ある回答者がある問の選択問題の解答をしていない場合，そこに <code>-</code> を入力してはいけません。
そこには，何も入力しないのが正しいデータ作成の方法です。
Microsoft Excelでデータ入力する場合は，そのセルには何も入力せずに次の入力に移ってください。
ただし，Rでデータ作成する場合，次のようにするとエラーが返ってきます。</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="2-基礎.html#cb121-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, , <span class="dv">4</span>, <span class="dv">5</span>)</span></code></pre></div>
<p>このため，欠損値には <code>NA</code> と書いてください。</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="2-基礎.html#cb122-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span></code></pre></div>
<p>CSVファイルなどをRで読み込むときに欠損値があると，その部分がデフォルトでは <code>NA</code> に置き換わります。
ここで，次のようにするとエラーが返ってきます。</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="2-基礎.html#cb123-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="sc">-</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span></code></pre></div>
<p>また，次のようにすると全体が文字列になります。</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="2-基礎.html#cb124-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="st">&quot;-&quot;</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span></code></pre></div>
<p>一方，アンケート調査で，文章で回答してもらう問に対して無回答だった場合，そこに <code>""</code> を入力してください。
Microsoft Excelでデータ入力する場合は，そのセルには何も入力せずに次の入力に移ってください。
CSVファイルなどをRで読み込むときに欠損値があると，その部分がデフォルトでは <code>""</code> に置き換わります。</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="2-基礎.html#cb125-1" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;テニスが好き&quot;</span>, <span class="st">&quot;バレーボールをやってた&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;野球が苦手&quot;</span>, <span class="st">&quot;サッカーが得意&quot;</span>)</span></code></pre></div>
<p>これだとエラーは返ってきませんが，あまりよい方法ではありません。
この場合，次のようにしてください。</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="2-基礎.html#cb126-1" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;テニスが好き&quot;</span>, <span class="st">&quot;バレーボールをやってた&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="st">&quot;野球が苦手&quot;</span>, <span class="st">&quot;サッカーが得意&quot;</span>)</span></code></pre></div>
<p><code>NA</code> に似たものに <code>NULL</code> があります。
<code>NULL</code> はデータの欠損値には使いません。
<code>NULL</code> には例えば次のような使い方があります。</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="2-基礎.html#cb127-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code></pre></div>
</div>
</div>
<div id="名前付きベクトル" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> 名前付きベクトル<a href="2-基礎.html#名前付きベクトル" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>名前付きベクトルというものがあります。
辞書のような働きをします。</p>
<p>あまり使わないので，ここでは説明を省略します。</p>
</div>
<div id="行列" class="section level3 hasAnchor" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> 行列<a href="2-基礎.html#行列" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Rは行列計算が高速であることが特徴のひとつです。
また，ここには書きませんが，行列を用いた数式の表記は簡潔です。</p>
<p>行列は以下のようにして作成します。</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="2-基礎.html#cb128-1" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12</code></pre>
<p><code>nrow</code> は行の数です。
行列の要素の数は，<code>nrow</code> の値で割り切れなければなりません。
列の数 <code>ncol</code> を指定しても構いません。</p>
<p>行列の外側の <code>[]</code>で囲まれた部分に注目してください。
<code>[]</code> と <code>,</code> と数字によって，そこが行列の何行目か，あるいは，何列目かが分かります。
<code>[行, 列]</code> という関係になっています。</p>
<p>行列はMicrosoft Excelでよく見る表に似ていますが，そうではなく，数学で出てくる行列そのものだと理解してください。
行列の要素は <code>[]</code> を用いて取り出します。
例えば，1行2列の要素は次のようにして取り出します。</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="2-基礎.html#cb130-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>)</span>
<span id="cb130-2"><a href="2-基礎.html#cb130-2" tabindex="-1"></a>x[<span class="dv">1</span>, <span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>行は次のようにして取り出します。</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="2-基礎.html#cb132-1" tabindex="-1"></a>x[<span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>## [1]  2  6 10</code></pre>
<p>列は次のようにして取り出します。</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="2-基礎.html#cb134-1" tabindex="-1"></a>x[, <span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1]  9 10 11 12</code></pre>
<p>この法則に従って，スペースを入れることを忘れないようにしてください（スペースを入れなくてもエラーは出ません）。</p>
<div id="tips-1" class="section level4 hasAnchor" number="2.2.3.1">
<h4><span class="header-section-number">2.2.3.1</span> Tips<a href="2-基礎.html#tips-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>行列はベクトルを折り畳んだようなものであると理解しておくと役に立つことがあります。
次の結果を比較して，行列がベクトルであることを理解してください。</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="2-基礎.html#cb136-1" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>)[<span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="2-基礎.html#cb138-1" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)[<span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>ただし，通常のデータ分析で行列を扱う機会は少ないかもしれません。
次のコマンドが <code>FALSE</code> を返すように，厳密にはベクトルではありません。</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="2-基礎.html#cb140-1" tabindex="-1"></a><span class="fu">is.vector</span>(<span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>))</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>しかし，ベクトルであるかのように動作することがあります。</p>
</div>
</div>
<div id="データフレーム" class="section level3 hasAnchor" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> データフレーム<a href="2-基礎.html#データフレーム" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>データフレームはMicrosoft Excelでよく見る表に似ており，そのようなものだと理解してください。
<code>read.csv()</code> で読み込んだオブジェクトは，データフレームです。</p>
<p>データフレームには行と列が存在する点では，行列に似ています。
しかしながら，行列とは違い，各列を異なる型にすることができることから，行列よりも柔軟なデータ構造となります。
それぞれの列は同じ型でなければなりません。</p>
<p>Rには最初から多くのデータセットが使える状態になっています。
サンプルとしてよく使われるデータセットに <code>iris</code> があります。
<code>iris</code> の中身は，<code>iris</code> と入力するだけで表示されます。</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="2-基礎.html#cb142-1" tabindex="-1"></a>iris</span></code></pre></div>
<p>データフレームの全体を表示させることなく，データフレームの構造を知りたいときは，最初の数行を表示させるコマンドを使うのが便利です。</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="2-基礎.html#cb143-1" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>同じように，最後の数行を表示させることもできます。</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="2-基礎.html#cb145-1" tabindex="-1"></a><span class="fu">tail</span>(iris)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 145          6.7         3.3          5.7         2.5 virginica
## 146          6.7         3.0          5.2         2.3 virginica
## 147          6.3         2.5          5.0         1.9 virginica
## 148          6.5         3.0          5.2         2.0 virginica
## 149          6.2         3.4          5.4         2.3 virginica
## 150          5.9         3.0          5.1         1.8 virginica</code></pre>
<p>途中の行を表示させたい場合は，行番号を指定します。</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="2-基礎.html#cb147-1" tabindex="-1"></a>iris[<span class="dv">100</span><span class="sc">:</span><span class="dv">105</span>, ]</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 100          5.7         2.8          4.1         1.3 versicolor
## 101          6.3         3.3          6.0         2.5  virginica
## 102          5.8         2.7          5.1         1.9  virginica
## 103          7.1         3.0          5.9         2.1  virginica
## 104          6.3         2.9          5.6         1.8  virginica
## 105          6.5         3.0          5.8         2.2  virginica</code></pre>
<p><code>iris</code> は変数であり，次のコマンドで確かめられるように，データフレームです。</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="2-基礎.html#cb149-1" tabindex="-1"></a><span class="fu">is.data.frame</span>(iris)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>データフレームの構造を知りたい場合は，次のようにします。</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="2-基礎.html#cb151-1" tabindex="-1"></a><span class="fu">str</span>(iris)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>データフレームを90度左に回転して反転させた表示になっていることに気づいたのではないでしょうか。
<code>iris</code> の1列目 <code>Sepal.Length</code> が一番上に表示されています。
<code>iris</code> の2列目は2行目というように順番に表示されます。</p>
<p>また，データフレームの列ごとにデータの型（の省略形）が表示されることが分かります。
すなわち，データフレームのどの列もデータの型は1つしか認められていません。
違う型の行を追加しようとすると，エラーになるか警告が表示されます。</p>
<p>行の数と列の数は次のコマンドで取得できます。</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="2-基礎.html#cb153-1" tabindex="-1"></a><span class="fu">dim</span>(iris)</span></code></pre></div>
<pre><code>## [1] 150   5</code></pre>
<p>この情報は，<code>str(iris)</code> の1行目に表示されるものと同じです。</p>
<p>なお，データフレームを Excel のように表示したい場合は，次のコマンドを実行します。</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="2-基礎.html#cb155-1" tabindex="-1"></a><span class="fu">View</span>(iris)</span></code></pre></div>
<p>macOS では XQuartz が起動します。
R に慣れるまで，データフレームを Excel のような表示にした方が分かりやすい場合は <code>View()</code> を使ってください。
そのうち，必要なくなると思います。</p>
<div id="データフレームの列" class="section level4 hasAnchor" number="2.2.4.1">
<h4><span class="header-section-number">2.2.4.1</span> データフレームの列<a href="2-基礎.html#データフレームの列" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>データフレームそのものを分析に使うこともできますが，必要な列を取り出して，分析に使うのが一般的です。
そこで，データフレームの列を取り出す方法をいくつか説明します。
なお，データフレームの進化したものに，<a href="https://tibble.tidyverse.org/" target="_blank">tibble</a> があります。
tibbleはデータフレームとほとんど同じように扱えますが，データフレームとは挙動が若干異なりますので，違うものと考えてください。
ちなみに，<code>read_excel()</code> で読み込んだオブジェクトは，tibbleです。
tibbleは <a href="https://www.tidyverse.org/" target="_blank">Tidyverse</a> の一部分（最も重要な部分）を構成します。</p>
<p>データフレームの列を取り出す場合，左から何列目であるかを数値で指定することができます。
次のコマンドにより，データフレームの列をベクトルとして取り出すことができます。</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="2-基礎.html#cb156-1" tabindex="-1"></a>iris[, <span class="dv">1</span>]</span></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1 5.7
##  [20] 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0 5.5 4.9
##  [39] 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5 6.5 5.7 6.3
##  [58] 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1 6.3 6.1 6.4 6.6
##  [77] 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5 5.5 6.1 5.8 5.0 5.6
##  [96] 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3 6.7 7.2 6.5 6.4 6.8 5.7
## [115] 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2 6.2 6.1 6.4 7.2 7.4 7.9 6.4
## [134] 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>返り値をデータフレームとして保ちたければ，次のようにします。</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="2-基礎.html#cb158-1" tabindex="-1"></a>iris[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>##     Sepal.Length
## 1            5.1
## 2            4.9
## 3            4.7
## 4            4.6
## 5            5.0
## 6            5.4
## 7            4.6
## 8            5.0
## 9            4.4
## 10           4.9
## 11           5.4
## 12           4.8
## 13           4.8
## 14           4.3
## 15           5.8
## 16           5.7
## 17           5.4
## 18           5.1
## 19           5.7
## 20           5.1
## 21           5.4
## 22           5.1
## 23           4.6
## 24           5.1
## 25           4.8
## 26           5.0
## 27           5.0
## 28           5.2
## 29           5.2
## 30           4.7
## 31           4.8
## 32           5.4
## 33           5.2
## 34           5.5
## 35           4.9
## 36           5.0
## 37           5.5
## 38           4.9
## 39           4.4
## 40           5.1
## 41           5.0
## 42           4.5
## 43           4.4
## 44           5.0
## 45           5.1
## 46           4.8
## 47           5.1
## 48           4.6
## 49           5.3
## 50           5.0
## 51           7.0
## 52           6.4
## 53           6.9
## 54           5.5
## 55           6.5
## 56           5.7
## 57           6.3
## 58           4.9
## 59           6.6
## 60           5.2
## 61           5.0
## 62           5.9
## 63           6.0
## 64           6.1
## 65           5.6
## 66           6.7
## 67           5.6
## 68           5.8
## 69           6.2
## 70           5.6
## 71           5.9
## 72           6.1
## 73           6.3
## 74           6.1
## 75           6.4
## 76           6.6
## 77           6.8
## 78           6.7
## 79           6.0
## 80           5.7
## 81           5.5
## 82           5.5
## 83           5.8
## 84           6.0
## 85           5.4
## 86           6.0
## 87           6.7
## 88           6.3
## 89           5.6
## 90           5.5
## 91           5.5
## 92           6.1
## 93           5.8
## 94           5.0
## 95           5.6
## 96           5.7
## 97           5.7
## 98           6.2
## 99           5.1
## 100          5.7
## 101          6.3
## 102          5.8
## 103          7.1
## 104          6.3
## 105          6.5
## 106          7.6
## 107          4.9
## 108          7.3
## 109          6.7
## 110          7.2
## 111          6.5
## 112          6.4
## 113          6.8
## 114          5.7
## 115          5.8
## 116          6.4
## 117          6.5
## 118          7.7
## 119          7.7
## 120          6.0
## 121          6.9
## 122          5.6
## 123          7.7
## 124          6.3
## 125          6.7
## 126          7.2
## 127          6.2
## 128          6.1
## 129          6.4
## 130          7.2
## 131          7.4
## 132          7.9
## 133          6.4
## 134          6.3
## 135          6.1
## 136          7.7
## 137          6.3
## 138          6.4
## 139          6.0
## 140          6.9
## 141          6.7
## 142          6.9
## 143          5.8
## 144          6.8
## 145          6.7
## 146          6.7
## 147          6.3
## 148          6.5
## 149          6.2
## 150          5.9</code></pre>
<p>次のようにすると，左から1列目をベクトルとして取り出せます。</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="2-基礎.html#cb160-1" tabindex="-1"></a>iris[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1 5.7
##  [20] 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0 5.5 4.9
##  [39] 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5 6.5 5.7 6.3
##  [58] 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1 6.3 6.1 6.4 6.6
##  [77] 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5 5.5 6.1 5.8 5.0 5.6
##  [96] 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3 6.7 7.2 6.5 6.4 6.8 5.7
## [115] 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2 6.2 6.1 6.4 7.2 7.4 7.9 6.4
## [134] 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>このことから，<code>iris[, 1]</code> と <code>iris[[1]]</code> は同じ結果が得られることが分かります。</p>
<p>データフレームの左から何列目かという情報は，対話的にRを使う場合は便利なときもありますが，データフレームの構造を正確に把握しておかなければならず，またデータフレームの列が多くなった場合，何列目かをわざわざ数えなければなりません。
こうした作業は面倒だということもありますが，それ以上に，間違う可能性があります。
列を取り出す際，データフレームの左から何列目かという情報ではなく，列名で指定する方が間違いが少なくなるでしょう。
<code>iris</code> の <code>Sepal.Length</code> 列を取り出したい場合は，次のように <code>$</code> で繋ぎます。</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="2-基礎.html#cb162-1" tabindex="-1"></a>iris<span class="sc">$</span>Sepal.Length</span></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1 5.7
##  [20] 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0 5.5 4.9
##  [39] 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5 6.5 5.7 6.3
##  [58] 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1 6.3 6.1 6.4 6.6
##  [77] 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5 5.5 6.1 5.8 5.0 5.6
##  [96] 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3 6.7 7.2 6.5 6.4 6.8 5.7
## [115] 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2 6.2 6.1 6.4 7.2 7.4 7.9 6.4
## [134] 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>列名が日本語の場合など，次のようにしなければエラーが返ってくることがあります。</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="2-基礎.html#cb164-1" tabindex="-1"></a>iris<span class="sc">$</span><span class="st">`</span><span class="at">Sepal.Length</span><span class="st">`</span></span></code></pre></div>
<p>日本語の他にも，列名に <code>()</code> が使われている場合は，`` で括らなければエラーが返ってきます。
返り値をデータフレームとして保ちたければ，次のようにします。</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="2-基礎.html#cb165-1" tabindex="-1"></a>iris[<span class="st">&quot;Sepal.Length&quot;</span>]</span></code></pre></div>
<pre><code>##     Sepal.Length
## 1            5.1
## 2            4.9
## 3            4.7
## 4            4.6
## 5            5.0
## 6            5.4
## 7            4.6
## 8            5.0
## 9            4.4
## 10           4.9
## 11           5.4
## 12           4.8
## 13           4.8
## 14           4.3
## 15           5.8
## 16           5.7
## 17           5.4
## 18           5.1
## 19           5.7
## 20           5.1
## 21           5.4
## 22           5.1
## 23           4.6
## 24           5.1
## 25           4.8
## 26           5.0
## 27           5.0
## 28           5.2
## 29           5.2
## 30           4.7
## 31           4.8
## 32           5.4
## 33           5.2
## 34           5.5
## 35           4.9
## 36           5.0
## 37           5.5
## 38           4.9
## 39           4.4
## 40           5.1
## 41           5.0
## 42           4.5
## 43           4.4
## 44           5.0
## 45           5.1
## 46           4.8
## 47           5.1
## 48           4.6
## 49           5.3
## 50           5.0
## 51           7.0
## 52           6.4
## 53           6.9
## 54           5.5
## 55           6.5
## 56           5.7
## 57           6.3
## 58           4.9
## 59           6.6
## 60           5.2
## 61           5.0
## 62           5.9
## 63           6.0
## 64           6.1
## 65           5.6
## 66           6.7
## 67           5.6
## 68           5.8
## 69           6.2
## 70           5.6
## 71           5.9
## 72           6.1
## 73           6.3
## 74           6.1
## 75           6.4
## 76           6.6
## 77           6.8
## 78           6.7
## 79           6.0
## 80           5.7
## 81           5.5
## 82           5.5
## 83           5.8
## 84           6.0
## 85           5.4
## 86           6.0
## 87           6.7
## 88           6.3
## 89           5.6
## 90           5.5
## 91           5.5
## 92           6.1
## 93           5.8
## 94           5.0
## 95           5.6
## 96           5.7
## 97           5.7
## 98           6.2
## 99           5.1
## 100          5.7
## 101          6.3
## 102          5.8
## 103          7.1
## 104          6.3
## 105          6.5
## 106          7.6
## 107          4.9
## 108          7.3
## 109          6.7
## 110          7.2
## 111          6.5
## 112          6.4
## 113          6.8
## 114          5.7
## 115          5.8
## 116          6.4
## 117          6.5
## 118          7.7
## 119          7.7
## 120          6.0
## 121          6.9
## 122          5.6
## 123          7.7
## 124          6.3
## 125          6.7
## 126          7.2
## 127          6.2
## 128          6.1
## 129          6.4
## 130          7.2
## 131          7.4
## 132          7.9
## 133          6.4
## 134          6.3
## 135          6.1
## 136          7.7
## 137          6.3
## 138          6.4
## 139          6.0
## 140          6.9
## 141          6.7
## 142          6.9
## 143          5.8
## 144          6.8
## 145          6.7
## 146          6.7
## 147          6.3
## 148          6.5
## 149          6.2
## 150          5.9</code></pre>
<p>このとき，<code>""</code> をつけなければエラーが返ってきます。
ここで，<code>""</code> の中は文字列として扱われるため，`` で括る必要はありません。</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="2-基礎.html#cb167-1" tabindex="-1"></a>iris[Sepal.Length]</span></code></pre></div>
<pre><code>## Error: オブジェクト &#39;Sepal.Length&#39; がありません</code></pre>
<p>このとき，<code>Sepal.Length</code> という名前の変数（オブジェクト）を探しに行き，それがないためエラーを返しています。
次のようにすると，ベクトルとして取り出せます。</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="2-基礎.html#cb169-1" tabindex="-1"></a>iris[[<span class="st">&quot;Sepal.Length&quot;</span>]]</span></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1 5.7
##  [20] 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0 5.5 4.9
##  [39] 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5 6.5 5.7 6.3
##  [58] 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1 6.3 6.1 6.4 6.6
##  [77] 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5 5.5 6.1 5.8 5.0 5.6
##  [96] 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3 6.7 7.2 6.5 6.4 6.8 5.7
## [115] 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2 6.2 6.1 6.4 7.2 7.4 7.9 6.4
## [134] 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>ここで，列名を知るにはどうすればよいでしょうか。
<code>str()</code> で知ることができますが，<code>str()</code> だと情報が多いです。
データフレームの列名のみを得るには，次のコマンドを用います。</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="2-基礎.html#cb171-1" tabindex="-1"></a><span class="fu">names</span>(iris)</span></code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;</code></pre>
<p>これは次のようにしても同じです。</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="2-基礎.html#cb173-1" tabindex="-1"></a><span class="fu">colnames</span>(iris)</span></code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;</code></pre>
<p>次に，複数の列を取り出してみます。
<code>iris</code> の <code>Sepal.Length</code> 列と <code>Sepal.Width</code> 列を取り出すには，次のようにします。</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="2-基礎.html#cb175-1" tabindex="-1"></a>iris[<span class="fu">c</span>(<span class="st">&quot;Sepal.Length&quot;</span>, <span class="st">&quot;Sepal.Width&quot;</span>)]</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width
## 1            5.1         3.5
## 2            4.9         3.0
## 3            4.7         3.2
## 4            4.6         3.1
## 5            5.0         3.6
## 6            5.4         3.9
## 7            4.6         3.4
## 8            5.0         3.4
## 9            4.4         2.9
## 10           4.9         3.1
## 11           5.4         3.7
## 12           4.8         3.4
## 13           4.8         3.0
## 14           4.3         3.0
## 15           5.8         4.0
## 16           5.7         4.4
## 17           5.4         3.9
## 18           5.1         3.5
## 19           5.7         3.8
## 20           5.1         3.8
## 21           5.4         3.4
## 22           5.1         3.7
## 23           4.6         3.6
## 24           5.1         3.3
## 25           4.8         3.4
## 26           5.0         3.0
## 27           5.0         3.4
## 28           5.2         3.5
## 29           5.2         3.4
## 30           4.7         3.2
## 31           4.8         3.1
## 32           5.4         3.4
## 33           5.2         4.1
## 34           5.5         4.2
## 35           4.9         3.1
## 36           5.0         3.2
## 37           5.5         3.5
## 38           4.9         3.6
## 39           4.4         3.0
## 40           5.1         3.4
## 41           5.0         3.5
## 42           4.5         2.3
## 43           4.4         3.2
## 44           5.0         3.5
## 45           5.1         3.8
## 46           4.8         3.0
## 47           5.1         3.8
## 48           4.6         3.2
## 49           5.3         3.7
## 50           5.0         3.3
## 51           7.0         3.2
## 52           6.4         3.2
## 53           6.9         3.1
## 54           5.5         2.3
## 55           6.5         2.8
## 56           5.7         2.8
## 57           6.3         3.3
## 58           4.9         2.4
## 59           6.6         2.9
## 60           5.2         2.7
## 61           5.0         2.0
## 62           5.9         3.0
## 63           6.0         2.2
## 64           6.1         2.9
## 65           5.6         2.9
## 66           6.7         3.1
## 67           5.6         3.0
## 68           5.8         2.7
## 69           6.2         2.2
## 70           5.6         2.5
## 71           5.9         3.2
## 72           6.1         2.8
## 73           6.3         2.5
## 74           6.1         2.8
## 75           6.4         2.9
## 76           6.6         3.0
## 77           6.8         2.8
## 78           6.7         3.0
## 79           6.0         2.9
## 80           5.7         2.6
## 81           5.5         2.4
## 82           5.5         2.4
## 83           5.8         2.7
## 84           6.0         2.7
## 85           5.4         3.0
## 86           6.0         3.4
## 87           6.7         3.1
## 88           6.3         2.3
## 89           5.6         3.0
## 90           5.5         2.5
## 91           5.5         2.6
## 92           6.1         3.0
## 93           5.8         2.6
## 94           5.0         2.3
## 95           5.6         2.7
## 96           5.7         3.0
## 97           5.7         2.9
## 98           6.2         2.9
## 99           5.1         2.5
## 100          5.7         2.8
## 101          6.3         3.3
## 102          5.8         2.7
## 103          7.1         3.0
## 104          6.3         2.9
## 105          6.5         3.0
## 106          7.6         3.0
## 107          4.9         2.5
## 108          7.3         2.9
## 109          6.7         2.5
## 110          7.2         3.6
## 111          6.5         3.2
## 112          6.4         2.7
## 113          6.8         3.0
## 114          5.7         2.5
## 115          5.8         2.8
## 116          6.4         3.2
## 117          6.5         3.0
## 118          7.7         3.8
## 119          7.7         2.6
## 120          6.0         2.2
## 121          6.9         3.2
## 122          5.6         2.8
## 123          7.7         2.8
## 124          6.3         2.7
## 125          6.7         3.3
## 126          7.2         3.2
## 127          6.2         2.8
## 128          6.1         3.0
## 129          6.4         2.8
## 130          7.2         3.0
## 131          7.4         2.8
## 132          7.9         3.8
## 133          6.4         2.8
## 134          6.3         2.8
## 135          6.1         2.6
## 136          7.7         3.0
## 137          6.3         3.4
## 138          6.4         3.1
## 139          6.0         3.0
## 140          6.9         3.1
## 141          6.7         3.1
## 142          6.9         3.1
## 143          5.8         2.7
## 144          6.8         3.2
## 145          6.7         3.3
## 146          6.7         3.0
## 147          6.3         2.5
## 148          6.5         3.0
## 149          6.2         3.4
## 150          5.9         3.0</code></pre>
<p>データフレームから複数列を取り出す場合，返り値はベクトルではなく，必ずデータフレームになります。
このため，<code>$</code> や <code>[[]]</code> は使えません。</p>
<p>ちなみに，以下のような表記法は，返り値としてベクトルが欲しい場合にもデータフレームが欲しい場合にも使えるので，便利です。
しかしながら，tibbleでこの方法は使えないため，残念ながら，こうした表記法は過去のものとなりました。</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="2-基礎.html#cb177-1" tabindex="-1"></a>iris[, <span class="st">&quot;Sepal.Length&quot;</span>]</span>
<span id="cb177-2"><a href="2-基礎.html#cb177-2" tabindex="-1"></a>iris[, <span class="st">&quot;Sepal.Length&quot;</span>, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb177-3"><a href="2-基礎.html#cb177-3" tabindex="-1"></a>iris[, <span class="fu">c</span>(<span class="st">&quot;Sepal.Length&quot;</span>, <span class="st">&quot;Sepal.Width&quot;</span>)]</span></code></pre></div>
</div>
<div id="データフレームの列-1" class="section level4 hasAnchor" number="2.2.4.2">
<h4><span class="header-section-number">2.2.4.2</span> データフレームの列<a href="2-基礎.html#データフレームの列-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>データフレームは，<code>data.frame()</code> で作成します。
データフレーム作成時に注意すべきことは，各列の長さを合わせるということです。
各列の長さが揃わないときは，短い列を繰り返します。
この繰り返しが整数倍でない場合，エラーが返ってきます。</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="2-基礎.html#cb178-1" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">year =</span> <span class="dv">1991</span><span class="sc">:</span><span class="dv">2020</span>, <span class="at">value1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>, <span class="at">value2 =</span> <span class="cn">NA</span>, <span class="at">value3 =</span> <span class="fu">c</span>(<span class="st">&quot;東&quot;</span>, <span class="st">&quot;西&quot;</span>, <span class="st">&quot;南&quot;</span>), <span class="at">value4 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
</div>
</div>
<div id="リスト" class="section level3 hasAnchor" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> リスト<a href="2-基礎.html#リスト" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>リストはさまざまな変数を入れることのできる，引き出しだと説明されることがあります。
さまざまな変数をリストに入れることができます。
データフレームのように，各要素の数を揃える必要はありません。
Pythonでいう辞書のようなものです。</p>
<p>リストはさまざまな形を取りますが，実践的には，複数のデータフレームを要素とできる点が便利です。</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="2-基礎.html#cb179-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>()</span></code></pre></div>
<p>また，関数の返り値がリストとなることがあります。
例えば，データフレームをある列（ファクター）に従って分割したい場合，<code>split()</code> を用います。</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="2-基礎.html#cb180-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">split</span>(iris, iris<span class="sc">$</span>Species)</span>
<span id="cb180-2"><a href="2-基礎.html#cb180-2" tabindex="-1"></a>x[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa
## 11          5.4         3.7          1.5         0.2  setosa
## 12          4.8         3.4          1.6         0.2  setosa
## 13          4.8         3.0          1.4         0.1  setosa
## 14          4.3         3.0          1.1         0.1  setosa
## 15          5.8         4.0          1.2         0.2  setosa
## 16          5.7         4.4          1.5         0.4  setosa
## 17          5.4         3.9          1.3         0.4  setosa
## 18          5.1         3.5          1.4         0.3  setosa
## 19          5.7         3.8          1.7         0.3  setosa
## 20          5.1         3.8          1.5         0.3  setosa
## 21          5.4         3.4          1.7         0.2  setosa
## 22          5.1         3.7          1.5         0.4  setosa
## 23          4.6         3.6          1.0         0.2  setosa
## 24          5.1         3.3          1.7         0.5  setosa
## 25          4.8         3.4          1.9         0.2  setosa
## 26          5.0         3.0          1.6         0.2  setosa
## 27          5.0         3.4          1.6         0.4  setosa
## 28          5.2         3.5          1.5         0.2  setosa
## 29          5.2         3.4          1.4         0.2  setosa
## 30          4.7         3.2          1.6         0.2  setosa
## 31          4.8         3.1          1.6         0.2  setosa
## 32          5.4         3.4          1.5         0.4  setosa
## 33          5.2         4.1          1.5         0.1  setosa
## 34          5.5         4.2          1.4         0.2  setosa
## 35          4.9         3.1          1.5         0.2  setosa
## 36          5.0         3.2          1.2         0.2  setosa
## 37          5.5         3.5          1.3         0.2  setosa
## 38          4.9         3.6          1.4         0.1  setosa
## 39          4.4         3.0          1.3         0.2  setosa
## 40          5.1         3.4          1.5         0.2  setosa
## 41          5.0         3.5          1.3         0.3  setosa
## 42          4.5         2.3          1.3         0.3  setosa
## 43          4.4         3.2          1.3         0.2  setosa
## 44          5.0         3.5          1.6         0.6  setosa
## 45          5.1         3.8          1.9         0.4  setosa
## 46          4.8         3.0          1.4         0.3  setosa
## 47          5.1         3.8          1.6         0.2  setosa
## 48          4.6         3.2          1.4         0.2  setosa
## 49          5.3         3.7          1.5         0.2  setosa
## 50          5.0         3.3          1.4         0.2  setosa</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="2-基礎.html#cb182-1" tabindex="-1"></a>x[[<span class="fu">names</span>(x)[<span class="dv">2</span>]]]</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 51           7.0         3.2          4.7         1.4 versicolor
## 52           6.4         3.2          4.5         1.5 versicolor
## 53           6.9         3.1          4.9         1.5 versicolor
## 54           5.5         2.3          4.0         1.3 versicolor
## 55           6.5         2.8          4.6         1.5 versicolor
## 56           5.7         2.8          4.5         1.3 versicolor
## 57           6.3         3.3          4.7         1.6 versicolor
## 58           4.9         2.4          3.3         1.0 versicolor
## 59           6.6         2.9          4.6         1.3 versicolor
## 60           5.2         2.7          3.9         1.4 versicolor
## 61           5.0         2.0          3.5         1.0 versicolor
## 62           5.9         3.0          4.2         1.5 versicolor
## 63           6.0         2.2          4.0         1.0 versicolor
## 64           6.1         2.9          4.7         1.4 versicolor
## 65           5.6         2.9          3.6         1.3 versicolor
## 66           6.7         3.1          4.4         1.4 versicolor
## 67           5.6         3.0          4.5         1.5 versicolor
## 68           5.8         2.7          4.1         1.0 versicolor
## 69           6.2         2.2          4.5         1.5 versicolor
## 70           5.6         2.5          3.9         1.1 versicolor
## 71           5.9         3.2          4.8         1.8 versicolor
## 72           6.1         2.8          4.0         1.3 versicolor
## 73           6.3         2.5          4.9         1.5 versicolor
## 74           6.1         2.8          4.7         1.2 versicolor
## 75           6.4         2.9          4.3         1.3 versicolor
## 76           6.6         3.0          4.4         1.4 versicolor
## 77           6.8         2.8          4.8         1.4 versicolor
## 78           6.7         3.0          5.0         1.7 versicolor
## 79           6.0         2.9          4.5         1.5 versicolor
## 80           5.7         2.6          3.5         1.0 versicolor
## 81           5.5         2.4          3.8         1.1 versicolor
## 82           5.5         2.4          3.7         1.0 versicolor
## 83           5.8         2.7          3.9         1.2 versicolor
## 84           6.0         2.7          5.1         1.6 versicolor
## 85           5.4         3.0          4.5         1.5 versicolor
## 86           6.0         3.4          4.5         1.6 versicolor
## 87           6.7         3.1          4.7         1.5 versicolor
## 88           6.3         2.3          4.4         1.3 versicolor
## 89           5.6         3.0          4.1         1.3 versicolor
## 90           5.5         2.5          4.0         1.3 versicolor
## 91           5.5         2.6          4.4         1.2 versicolor
## 92           6.1         3.0          4.6         1.4 versicolor
## 93           5.8         2.6          4.0         1.2 versicolor
## 94           5.0         2.3          3.3         1.0 versicolor
## 95           5.6         2.7          4.2         1.3 versicolor
## 96           5.7         3.0          4.2         1.2 versicolor
## 97           5.7         2.9          4.2         1.3 versicolor
## 98           6.2         2.9          4.3         1.3 versicolor
## 99           5.1         2.5          3.0         1.1 versicolor
## 100          5.7         2.8          4.1         1.3 versicolor</code></pre>
</div>
</div>
<div id="特殊記号" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> 特殊記号<a href="2-基礎.html#特殊記号" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="コメント" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> コメント<a href="2-基礎.html#コメント" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>#</code> で始まる行は<strong>コメント</strong>です。
行の途中に <code>#</code> がある場合は，そこから右，改行までの文字がコメントとみなされます。
Rはコメントを無視します。
コメントは人間が読んで理解できるようなことを書くのに重宝します。
Rはコメントを無視するため，そこには何を書いても問題ありません。</p>
<p>例えば，コードを書き換える場合を想像してみてください。
新しいコードに問題があったときに，古いコードを復活させるかもしれず，残しておきたい，しかし，古いコードは実行したくないというときに，古いコードの先頭にコメントを付けることがあります。
他には，「このコードは一部の人のみ実行してください」や「このコードは実行しなくてもよい」といった意味で使用することもあります。</p>
</div>
<div id="セミコロン" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> セミコロン<a href="2-基礎.html#セミコロン" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>通常，Rでは1行に複数のコマンドを書きません。
ただし，1行に複数のコマンドを書くこともできます。
何らかの理由により，1行に複数のコマンドを書きたい場合は，次のように <code>;</code> で繋げます。</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="2-基礎.html#cb184-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>; <span class="fu">sum</span>(x)</span></code></pre></div>
<pre><code>## [1] 5050</code></pre>
<p>ただし，こうしたからといって処理速度が速くなることはありません。
一方，人間がコードを読むときに，コードが詰まって書かれていると読みづらくなるため，基本的に1行に複数のコマンドは書かないことが多いです。</p>
<p>なお，<code>;</code> を使って書くと，コマンドと返り値の順番に変化がもたらされます。</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="2-基礎.html#cb186-1" tabindex="-1"></a><span class="fu">sum</span>(x)</span></code></pre></div>
<pre><code>## [1] 5050</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="2-基礎.html#cb188-1" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code></pre></div>
<pre><code>## [1] 50.5</code></pre>
<p><code>;</code> のない場合とある場合とで，コマンドと返り値が表示される順番に違いがあることに注目してください。</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="2-基礎.html#cb190-1" tabindex="-1"></a><span class="fu">sum</span>(x); <span class="fu">mean</span>(x)</span></code></pre></div>
<pre><code>## [1] 5050</code></pre>
<pre><code>## [1] 50.5</code></pre>
<p>返り値がまとまってほしいときに便利ですが，そうなってほしいことは滅多にありません。</p>
</div>
<div id="評価と同時に返り値を表示" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> 評価と同時に返り値を表示<a href="2-基礎.html#評価と同時に返り値を表示" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>コマンドを実行して，返り値を得ることを評価と呼びます。
このとき，同時に，その返り値を表示したい場合，コマンド全体を <code>()</code> で括ります。</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="2-基礎.html#cb193-1" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>関数の <code>()</code> とは異なり，全体を <code>()</code> で括ります。
これは次のようなコマンドを実行するのと同じことです。</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="2-基礎.html#cb195-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb195-2"><a href="2-基礎.html#cb195-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>このように冗長に書くよりも，<code>()</code> を使った方が分かりやすいことがたまにあります。</p>
</div>
</div>
<div id="入門書" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> 入門書<a href="2-基礎.html#入門書" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>奥村先生による <a href="https://okumuralab.org/~okumura/stat/" target="_blank">統計・データ解析</a> は大変参考になります。
時間をかけてじっくり読むとともに，自分のパソコンで同じようにできるか確かめてください。</p>
<p>また，Posit Cloud にある <a href="https://posit.cloud/learn/primers" target="_blank">Posit Primers</a> は時間をかけて読む価値がありそうです。</p>
<div id="チートシート" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> チートシート<a href="2-基礎.html#チートシート" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><a href="https://posit.cloud/learn/cheat-sheets" target="_blank">Posit Cheat Sheets</a></p>
<p>チートシートの日本語訳がここからダウンロードできます（ページ右側の Downloadボタンをクリック）。</p>
<ul>
<li><a href="https://github.com/rstudio/cheatsheets/tree/main/translations/japanese" target="_blank">rstudio/cheatsheets</a></li>
</ul>
</div>
</div>
<div id="練習問題-1" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> 練習問題<a href="2-基礎.html#練習問題-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>次の変数 <code>x</code> を文字列に変換しなさい。</li>
</ol>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="2-基礎.html#cb197-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1990</span><span class="sc">:</span><span class="dv">2010</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>次の変数 <code>y</code> を文字列に変換しなさい。</li>
</ol>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="2-基礎.html#cb198-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;松山市&quot;</span>, <span class="st">&quot;今治市&quot;</span>, <span class="st">&quot;宇和島市&quot;</span>, <span class="st">&quot;八幡浜市&quot;</span>, <span class="st">&quot;新居浜市&quot;</span>, <span class="st">&quot;西条市&quot;</span>, <span class="st">&quot;大洲市&quot;</span>, <span class="st">&quot;伊予市&quot;</span>, <span class="st">&quot;四国中央市&quot;</span>, <span class="st">&quot;西予市&quot;</span>, <span class="st">&quot;東温市&quot;</span>)</span>
<span id="cb198-2"><a href="2-基礎.html#cb198-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">factor</span>(x, <span class="at">level =</span> x)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>次の変数 <code>y</code> を数値に変換しなさい。</li>
</ol>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="2-基礎.html#cb199-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;4&quot;</span>, <span class="st">&quot;3&quot;</span>)</span>
<span id="cb199-2"><a href="2-基礎.html#cb199-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">factor</span>(x, <span class="at">level =</span> x)</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>次のデータフレーム <code>z</code> があるとする。<code>z</code> を使って，2000年以降の <code>value</code> の値の平均を求めなさい。</li>
</ol>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="2-基礎.html#cb200-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1990</span><span class="sc">:</span><span class="dv">2021</span></span>
<span id="cb200-2"><a href="2-基礎.html#cb200-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">5000</span>, <span class="dv">5030</span>, <span class="dv">2</span>)</span>
<span id="cb200-3"><a href="2-基礎.html#cb200-3" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">year =</span> x, <span class="at">value =</span> y)</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li><a href="https://people.sc.fsu.edu/~jburkardt/data/csv/csv.html" target="_blank">CSV Files</a> から任意のCSVファイルをダウンロードして，R上の変数 <code>x</code> に読み込みなさい。また，正しく読み込めたかを確かめなさい。</li>
</ol>
<ul>
<li>ヒント：CSVファイルを読み込む関数は，<code>read.csv()</code> です。</li>
</ul>
<ol start="6" style="list-style-type: decimal">
<li>気象庁の次のWebサイトからCSVファイルをダウンロードして，変数 <code>temp</code> に読み込んだ後，世界全体の年平均気温偏差の最大値と最小値を求めなさい。</li>
</ol>
<ul>
<li><a href="https://www.data.jma.go.jp/cpdinfo/temp/list/an_wld.html" target="_blank">世界の年平均気温偏差（℃）</a></li>
</ul>
<ol start="7" style="list-style-type: decimal">
<li><a href="https://www.e-stat.go.jp" target="_blank">政府統計の総合窓口（e-Stat）</a> から任意のExcelファイルをダウンロードして，R上の変数 <code>excercise</code> に読み込みなさい。また，正しく読み込めたかを確かめなさい。</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="1-まずは使ってみる.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="3-ファイル操作.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

</body>

</html>
